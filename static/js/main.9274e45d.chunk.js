(this.webpackJsonpschematic=this.webpackJsonpschematic||[]).push([[0],{51:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var i=n(1),o=n.n(i),r=n(41),a=n.n(r),s=(n(50),n(51),n(3)),c=n(55);function l(e){var t=e.match(/^[gs](\d+)$/);if(t)return{gameId:t[0],gameNumber:parseInt(t[1],10)}}function u(e){var t=Object(c.a)(e);if(!t)return"s1";var n=l(t.id);if(!n)throw new Error;return"s".concat(n.gameNumber+1)}function d(e){var t=Object(i.useRef)(e);return t.current=e,t}function h(e){var t=d(e);return Object(i.useCallback)((function(){return t.current.apply(t,arguments)}),[])}function p(e,t){var n=h(t);Object(i.useEffect)((function(){return window.addEventListener(e,n,!1),function(){window.removeEventListener(e,n,!1)}}),[e,n])}var f,v,m,O,y=n(4),b=n(2),g=n(5),j=n(45),x=Object(j.a)({theme:{colors:{gray400:"gainsboro",gray500:"lightgray"}},media:{bp1:"(min-width: 480px)",bp2:"(min-width: 768px)"},utils:{fontVariant:function(e){var t=e.split("|"),n=Object(s.a)(t,2),i=n[0],o=n[1];return{fontSize:"".concat(i,"px"),lineHeight:"".concat(o,"px")}}}}),E=x.styled,w=(x.css,x.globalCss,x.keyframes,x.getCssText,x.theme,x.createTheme,x.config,n(7));!function(e){e.PNP="pnp",e.NPN="npn",e.POWER="power",e.GROUND="ground",e.INPUT="input",e.OUTPUT="output",e.DOT="dot"}(f||(f={})),function(e){e[e.ELEMENT=0]="ELEMENT",e[e.CONNECTION=1]="CONNECTION",e[e.PIN=2]="PIN"}(v||(v={})),function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.DONE=2]="DONE"}(m||(m={}));var I,S,N=48,P=150,k=100,T=(O={},Object(w.a)(O,f.PNP,{pins:[{pos:{x:.47,y:.94}},{pos:{x:-.07,y:.32}},{pos:{x:1.05,y:.32}}]}),Object(w.a)(O,f.NPN,{pins:[{pos:{x:.47,y:1}},{pos:{x:-.07,y:.33}},{pos:{x:1.05,y:.32}}]}),Object(w.a)(O,f.POWER,{pins:[{pos:{x:.52,y:.8}}]}),Object(w.a)(O,f.GROUND,{pins:[{pos:{x:.46,y:.15}}]}),Object(w.a)(O,f.INPUT,{pins:[{pos:{x:.5,y:.8}}]}),Object(w.a)(O,f.OUTPUT,{pins:[{pos:{x:.2,y:.5}}]}),Object(w.a)(O,f.DOT,{pins:[{pos:{x:.5,y:.5}}]}),O),D={autoSaves:!0,isInputVector:!1,isOutputVector:!1,simulate:!1,debugDrawId:!1,debugDrawAxis:!1,debugShowFps:!1},C=n(26),M=n(27),U=n(8),R=n(56),L=n(58),G=n(59),W=n(57),A=n(37),H=n(25),V=n.n(H);function F(e,t){return{x:e.x-t.x,y:e.y-t.y}}function B(e,t){var n=Math.sin(t),i=Math.cos(t);return{x:e.x*i-e.y*n,y:e.x*n+e.y*i}}function _(e){return"".concat(e.elId,":").concat(e.pinIndex)}function J(){var e=Object(i.useRef)(0),t=Object(i.useState)(e.current),n=Object(s.a)(t,2)[1];return Object(i.useCallback)((function(){e.current+=1,n(e.current)}),[])}function Y(e,t){return e.filter((function(e,n){return n!==t}))}function z(e){return"sch_game_".concat(e)}function X(e){return"sch_game_preview_".concat(e)}function $(e,t,n){var i=n.value;n.value=function(){if(!(this instanceof Z))throw new Error;var e=!1;this.underWatch||(e=!0,this.underWatch=!0);for(var t=this.getState(),n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=i.apply(this,o);if(e){if(!this.needTriggerUpdate){var s=this.getState();this.needTriggerUpdate=t!==s}this.needTriggerUpdate&&(this.needTriggerUpdate=!1,this.triggerUpdate()),this.underWatch=!1}return a}}function Q(e,t,n){var i=n.value;n.value=function(){if(!(this instanceof Z))throw new Error;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=i.apply(this,t);return this.underWatch?this.needTriggerUpdate=!0:this.triggerUpdate(),o}}!function(e){e[e.IMPEDANCE=0]="IMPEDANCE",e[e.GROUND=1]="GROUND",e[e.POWER=2]="POWER",e[e.SHORT_CIRCUIT=3]="SHORT_CIRCUIT"}(I||(I={}));var Z=(S=function(){function e(t){var n=t.gameId,i=t.elements,o=t.connections,r=t.inputSignals,a=t.pos,s=t.options;Object(C.a)(this,e),this.underWatch=!1,this.needTriggerUpdate=!1,this.gameId=void 0,this.drawHandler=void 0,this.destroying=!1,this.elements=void 0,this.connections=void 0,this.inputSignals=void 0,this.pos=void 0,this.options=void 0,this.hoverElement=void 0,this.focusElement=void 0,this.wireElement=void 0,this.movingElement=void 0,this.mousePos=void 0,this.mouseState=void 0,this.panState=void 0,this.lastStateSnapshot=void 0,this.getPreview=void 0,this.stateListeners=void 0,this.saveGameThrottled=Object(R.a)(this.saveGame,2e3,{leading:!1,trailing:!0}),this.gameId=n,this.elements=i,this.connections=o,this.inputSignals=r,this.pos=a,this.options=s,window.gameModel=this,this.hoverElement=void 0,this.focusElement=void 0,this.wireElement=void 0,this.movingElement=void 0,this.mouseState={isMouseDown:!1},this.panState={isPan:!1},this.mousePos=void 0,this.stateListeners=[],this.lastStateSnapshot=void 0}return Object(M.a)(e,[{key:"destroy",value:function(){this.destroying=!0,this.saveGameThrottled.flush(),this.clearState(),this.drawHandler=void 0,this.getPreview=void 0}},{key:"setDrawHandler",value:function(e){this.drawHandler=e}},{key:"setPreviewHandler",value:function(e){this.getPreview=e}},{key:"saveGame",value:function(){localStorage.setItem(z(this.gameId),JSON.stringify({pos:this.pos,elements:this.elements,inputSignals:this.inputSignals,connections:this.connections,options:this.options}));try{var e,t=null===(e=this.getPreview)||void 0===e?void 0:e.call(this);t&&localStorage.setItem(X(this.gameId),t)}catch(n){console.error(n)}}},{key:"getState",value:function(){var e={elements:this.elements,connections:this.connections,inputSignals:this.inputSignals,pos:this.pos,options:this.options,hoverElement:this.hoverElement,focusElement:this.focusElement,wireElement:this.wireElement,movingElement:this.movingElement,panState:this.panState};return this.lastStateSnapshot&&V()(e,this.lastStateSnapshot.cmpState)||(this.lastStateSnapshot={cmpState:e,state:Object(g.a)(Object(g.a)({},e),{},{cursor:this.getCursor(),nodesSimulation:this.getSimulation()})}),this.lastStateSnapshot.state}},{key:"deleteElementInFocus",value:function(){var e=this.focusElement;if(e){switch(e.type){case v.ELEMENT:this.connections=this.connections.filter((function(t){var n=Object(s.a)(t,2),i=n[0],o=n[1];return i.elId!==e.elId&&o.elId!==e.elId}));var t=this.elements.find((function(t){return t.id===e.elId}));if(!t)throw new Error;if(t.type===f.INPUT){var n=this.elements.filter((function(e){return e.type===f.INPUT})).indexOf(t);this.inputSignals=Y(this.inputSignals,n)}this.elements=Object(L.a)(this.elements,t);break;case v.CONNECTION:this.connections=Y(this.connections,e.connectionIndex)}this.focusElement=void 0}}},{key:"updateInputSignals",value:function(e){this.inputSignals=e}},{key:"updateOptions",value:function(e){this.options=e}},{key:"onMouseDown",value:function(){this.mouseState.isMouseDown&&this.onMouseUp(),this.mouseState.isMouseDown=!0}},{key:"onMouseMove",value:function(e){var t=this,n=e.position,i=n.x,o=n.y,r=e.movement,a=r.x,s=r.y;this.mousePos={x:i,y:o},this.checkHover();var c=Boolean(this.movingElement);if(this.mouseState.isMouseDown){c||this.wireElement||!this.hoverElement||this.hoverElement.type!==v.PIN||this.startWiring({elId:this.hoverElement.elId,pinIndex:this.hoverElement.pinIndex}),c||this.wireElement||!this.hoverElement||this.hoverElement.type!==v.ELEMENT||(this.movingElement={elId:this.hoverElement.elId},this.focusElement={type:v.ELEMENT,elId:this.hoverElement.elId}),this.wireElement||this.movingElement||this.panState.isPan||(this.panState={isPan:!0});var l=this.movingElement;l?this.updateElement(l.elId,(function(e){e.pos.x+=a,e.pos.y+=s})):this.wireElement||(this.pos={x:this.pos.x+a,y:this.pos.y+s})}else this.panState.isPan&&(this.panState={isPan:!1});this.wireElement&&(this.wireElement=Object(A.a)(this.wireElement,(function(e){if(t.mousePos){var n=t.mousePos.x-t.pos.x,i=t.mousePos.y-t.pos.y;e.pullPos?(e.pullPos.x=n,e.pullPos.y=i):e.pullPos={x:n,y:i}}else e.pullPos=void 0})))}},{key:"onMouseUp",value:function(){this.mouseState={isMouseDown:!1},!this.focusElement||this.wireElement||this.movingElement||(this.focusElement=void 0),this.movingElement&&(this.movingElement=void 0),this.panState.isPan&&(this.panState={isPan:!1}),this.wireElement?(this.hoverElement&&this.hoverElement.type===v.PIN&&this.wireElement.elId!==this.hoverElement.elId&&(this.connections=[].concat(Object(y.a)(this.connections),[[{elId:this.hoverElement.elId,pinIndex:this.hoverElement.pinIndex},{elId:this.wireElement.elId,pinIndex:this.wireElement.pinIndex}]])),this.wireElement=void 0):this.wireElement||(this.hoverElement&&this.hoverElement.type===v.PIN&&this.startWiring({elId:this.hoverElement.elId,pinIndex:this.hoverElement.pinIndex}),this.hoverElement&&(this.hoverElement.type===v.ELEMENT?this.focusElement&&this.focusElement.type===v.ELEMENT&&this.focusElement.elId===this.hoverElement.elId||(this.focusElement={type:v.ELEMENT,elId:this.hoverElement.elId}):this.hoverElement.type===v.CONNECTION&&(this.focusElement&&this.focusElement.type===v.CONNECTION&&this.focusElement.connectionIndex===this.hoverElement.connectionIndex||(this.focusElement={type:v.CONNECTION,connectionIndex:this.hoverElement.connectionIndex}))))}},{key:"getCursor",value:function(){var e=this.wireElement,t=this.hoverElement,n=this.panState;if(e)return"pointer";if(t){switch(t.type){case v.PIN:case v.CONNECTION:return"pointer";case v.ELEMENT:return"move"}if(n.isPan)return"grabbing"}else if(n.isPan)return"move";return"initial"}},{key:"addElement",value:function(e){for(var t=Object(g.a)({},this.pos);this.checkOverlap(t);)t.x+=68;this.elements=[].concat(Object(y.a)(this.elements),[{type:e,id:this.getNextId(),pos:t}]),e===f.INPUT&&(this.inputSignals=[].concat(Object(y.a)(this.inputSignals),[!1]))}},{key:"startWiring",value:function(e){var t=e.elId,n=e.pinIndex;this.focusElement={type:v.ELEMENT,elId:t},this.wireElement={elId:t,pinIndex:n,pullPos:this.mousePos}}},{key:"resetCursorState",value:function(){this.movingElement=void 0,this.wireElement=void 0,this.mouseState.isMouseDown&&(this.mouseState={isMouseDown:!1}),this.panState.isPan&&(this.panState={isPan:!1})}},{key:"triggerUpdate",value:function(){if(!this.destroying){this.drawHandler&&this.drawHandler(),this.saveGameThrottled();var e,t=this.getState(),n=Object(b.a)(this.stateListeners);try{for(n.s();!(e=n.n()).done;){e.value.isActual=!1}}catch(h){n.e(h)}finally{n.f()}var i,o=Object(b.a)(this.stateListeners);try{for(o.s();!(i=o.n()).done;){var r=i.value;if(!r.isActual){var a=r.forceUpdate,s=r.selector,c=r.lastSelectedValue,l=s(t);V()(l,c)||(r.actualSelectedValue={value:l},a())}}}catch(h){o.e(h)}finally{o.f()}var u,d=Object(b.a)(this.stateListeners);try{for(d.s();!(u=d.n()).done;){u.value.actualSelectedValue=void 0}}catch(h){d.e(h)}finally{d.f()}}}},{key:"clearState",value:function(){this.pos={x:0,y:0},this.elements=[],this.connections=[],this.inputSignals=[],this.hoverElement=void 0,this.focusElement=void 0,this.movingElement=void 0,this.wireElement=void 0,this.panState.isPan=!1,this.mouseState.isMouseDown=!1}},{key:"reloadFromSave",value:function(){try{var t=e.getLoadedState(this.gameId),n=t.elements,i=t.connections,o=t.pos,r=t.options,a=t.inputSignals;this.clearState(),this.elements=n,this.connections=i,this.pos=o,this.options=r,this.inputSignals=a}catch(s){console.error("Can't load state:",s)}}},{key:"updateElement",value:function(e,t){this.elements=Object(A.a)(this.elements,(function(n){var i=n.find((function(t){return t.id===e}));if(!i)throw new Error("Element ".concat(e," is not found"));t(i)}))}},{key:"checkHover",value:function(){if(this.mousePos){var e=F(this.mousePos,this.pos),t=this.checkPinHover(e)||this.checkElementHover(e)||this.checkConnectionHover(e);V()(this.hoverElement,t)||(this.hoverElement=t)}else this.hoverElement=void 0}},{key:"checkPinHover",value:function(e){var t,n=e.x,i=e.y,o=Object(b.a)(this.elements);try{for(o.s();!(t=o.n()).done;){var r,a=t.value,s=T[a.type].pins,c=a.pos.x-24,l=a.pos.y-24,u=Object(b.a)(s);try{for(u.s();!(r=u.n()).done;){var d=r.value;if(Math.pow(c+d.pos.x*N-n,2)+Math.pow(l+d.pos.y*N-i,2)<Math.pow(9,2))return{type:v.PIN,elId:a.id,pinIndex:s.indexOf(d)}}}catch(h){u.e(h)}finally{u.f()}}}catch(h){o.e(h)}finally{o.f()}}},{key:"checkElementHover",value:function(e){var t,n=e.x,i=e.y,o=Object(b.a)(this.elements);try{for(o.s();!(t=o.n()).done;){var r=t.value,a=r.pos.x-24,s=r.pos.y-24;if(n>a&&n<a+N&&i>s&&i<s+N)return{type:v.ELEMENT,elId:r.id}}}catch(c){o.e(c)}finally{o.f()}}},{key:"checkConnectionHover",value:function(e){var t,n=e.x,i=e.y,o=Object(b.a)(this.connections);try{for(o.s();!(t=o.n()).done;){var r=t.value,a=Object(s.a)(r,2),c=a[0],l=a[1],u=this.getConnectionPinPosition(c),d=F(this.getConnectionPinPosition(l),u),h=F({x:n,y:i},u),p=Math.atan2(d.y,d.x),f=B(d,-p),m=B(h,-p);if(m.x>=-10&&m.x<=f.x+10&&m.y>-10&&m.y<10)return{type:v.CONNECTION,connectionIndex:this.connections.indexOf(r)}}}catch(O){o.e(O)}finally{o.f()}}},{key:"applyHoverElement",value:function(e){V()(this.hoverElement,e)||(this.hoverElement=e)}},{key:"getConnectionPinPosition",value:function(e){var t=e.elId,n=e.pinIndex,i=this.getElById(t),o=T[i.type].pins[n];return{x:i.pos.x+(o.pos.x-.5)*N,y:i.pos.y+(o.pos.y-.5)*N}}},{key:"getElById",value:function(e){var t=this.elements.find((function(t){return t.id===e}));if(!t)throw new Error("Element not found");return t}},{key:"checkOverlap",value:function(e){var t,n=Object(b.a)(this.elements);try{for(n.s();!(t=n.n()).done;){var i=t.value.pos;if(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)<Math.pow(24,2))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"getNextId",value:function(){var e=Object(c.a)(this.elements);if(!e)return"el1";var t=e.id.match(/^el(\d+)$/);if(!t)throw new Error;return"el".concat(parseInt(t[1],10)+1)}},{key:"allowOpenContextMenu",value:function(){return!this.hoverElement&&!this.wireElement&&!this.panState.isPan}},{key:"getSimulation",value:function(){if(this.options.simulate)return function(e,t,n){var i=!1;function o(t){var n=t.split(":")[0],i=e.find((function(e){return e.id===n}));if(!i)throw new Error("No element");return i}var r,a=e.filter((function(e){return e.type===f.INPUT})),c=new Map,l=new Set,u=Object(b.a)(t);try{for(u.s();!(r=u.n()).done;){var d=Object(s.a)(r.value,2),h=d[0],p=d[1],v=_(h),m=_(p),O=c.get(v),g=c.get(m);if(O&&g){var j=[].concat(Object(y.a)(O),Object(y.a)(g));l.delete(O),l.delete(g),l.add(j);var x,E=Object(b.a)(j);try{for(E.s();!(x=E.n()).done;){var w=x.value;c.set(w,j)}}catch(P){E.e(P)}finally{E.f()}}else if(O)O.push(m),c.set(m,O);else if(g)g.push(v),c.set(v,g);else{var S=[v,m];l.add(S),c.set(v,S),c.set(m,S)}}}catch(P){u.e(P)}finally{u.f()}var N=Object(y.a)(l.values()).map((function(e){return{state:I.IMPEDANCE,pins:e}}));return function(e){var t,r=new Map,s=Object(b.a)(e);try{for(s.s();!(t=s.n()).done;){var c,l=t.value,u=Object(b.a)(l.pins);try{for(u.s();!(c=u.n()).done;){var d=c.value;r.set(d,l)}}catch(P){u.e(P)}finally{u.f()}}}catch(P){s.e(P)}finally{s.f()}var h=!0;function p(e,t){return t===I.POWER&&e.state===I.GROUND||t===I.GROUND&&e.state===I.POWER?(i=!0,void(e.state=I.SHORT_CIRCUIT)):void(e.state!==t&&(e.state=t,h=!0))}for(var v=0;h;){if(h=!1,(v+=1)>100)throw new Error("Simulation in infinity loop");var m,O=Object(b.a)(e);try{for(O.s();!(m=O.n()).done;){var y,g=m.value,j=Object(b.a)(g.pins);try{for(j.s();!(y=j.n()).done;){var x=o(y.value);switch(x.type){case f.INPUT:var E=a.indexOf(x);p(g,n[E]?I.POWER:I.GROUND);break;case f.POWER:p(g,I.POWER);break;case f.GROUND:p(g,I.GROUND);break;case f.NPN:var w=r.get("".concat(x.id,":0")),S=r.get("".concat(x.id,":1")),N=r.get("".concat(x.id,":2"));w&&w.state===I.GROUND&&S&&S.state===I.POWER&&N&&p(N,I.POWER);break;case f.PNP:var k=r.get("".concat(x.id,":0")),T=r.get("".concat(x.id,":1")),D=r.get("".concat(x.id,":2"));k&&k.state===I.POWER&&T&&T.state===I.GROUND&&D&&p(D,I.GROUND)}if(i)return}}catch(P){j.e(P)}finally{j.f()}}}catch(P){O.e(P)}finally{O.f()}}}(N),N}(this.elements,this.connections,this.inputSignals)}}],[{key:"createEmptyModel",value:function(t){return new e({gameId:t,pos:{x:0,y:0},elements:[],connections:[],inputSignals:[],options:D})}},{key:"getLoadedState",value:function(e){var t=localStorage.getItem(z(e));if(!t)throw new Error("No saved game");var n=JSON.parse(t),i=n.pos,o=n.elements,r=n.inputSignals,a=n.connections,s=n.options,c=Object.keys(D);return{gameId:e,pos:i,elements:o,connections:a,inputSignals:r,options:Object(G.a)(Object(W.a)(s,c),D)}}},{key:"checkSavedGame",value:function(e){var t=localStorage.getItem(z(e));return Boolean(t)}},{key:"loadGame",value:function(t){return new e(e.getLoadedState(t))}},{key:"removeGame",value:function(e){localStorage.removeItem(z(e))}},{key:"cloneGame",value:function(e,t){var n=localStorage.getItem(z(e));n&&localStorage.setItem(z(t),n)}}]),e}(),Object(U.a)(S.prototype,"deleteElementInFocus",[$],Object.getOwnPropertyDescriptor(S.prototype,"deleteElementInFocus"),S.prototype),Object(U.a)(S.prototype,"updateInputSignals",[Q],Object.getOwnPropertyDescriptor(S.prototype,"updateInputSignals"),S.prototype),Object(U.a)(S.prototype,"updateOptions",[Q],Object.getOwnPropertyDescriptor(S.prototype,"updateOptions"),S.prototype),Object(U.a)(S.prototype,"onMouseMove",[$],Object.getOwnPropertyDescriptor(S.prototype,"onMouseMove"),S.prototype),Object(U.a)(S.prototype,"onMouseUp",[$],Object.getOwnPropertyDescriptor(S.prototype,"onMouseUp"),S.prototype),Object(U.a)(S.prototype,"addElement",[Q],Object.getOwnPropertyDescriptor(S.prototype,"addElement"),S.prototype),Object(U.a)(S.prototype,"startWiring",[$],Object.getOwnPropertyDescriptor(S.prototype,"startWiring"),S.prototype),Object(U.a)(S.prototype,"resetCursorState",[$],Object.getOwnPropertyDescriptor(S.prototype,"resetCursorState"),S.prototype),Object(U.a)(S.prototype,"clearState",[Q],Object.getOwnPropertyDescriptor(S.prototype,"clearState"),S.prototype),Object(U.a)(S.prototype,"reloadFromSave",[Q],Object.getOwnPropertyDescriptor(S.prototype,"reloadFromSave"),S.prototype),Object(U.a)(S.prototype,"updateElement",[$],Object.getOwnPropertyDescriptor(S.prototype,"updateElement"),S.prototype),Object(U.a)(S.prototype,"checkHover",[$],Object.getOwnPropertyDescriptor(S.prototype,"checkHover"),S.prototype),S);function q(e,t){var n,i=J(),o=e.stateListeners.find((function(e){return e.forceUpdate===i})),r=h(t),a=e.getState();if(o)return o.isActual=!0,n=o.actualSelectedValue?o.actualSelectedValue.value:r(a),o.lastSelectedValue=n,o.isActual=!0,n;var s=r(a);return e.stateListeners.push({forceUpdate:i,selector:r,actualSelectedValue:void 0,lastSelectedValue:s,isActual:!0}),s}var K=n(0),ee="NO_PREVIEW",te=E("div",{display:"flex",flexDirection:"column",alignItems:"start",height:"100%",padding:16,boxSizing:"border-box","> *":{flexShrink:0}}),ne=E("h1",{margin:"0 0 10px"}),ie=E("h2",{marginBottom:10,fontVariant:"18|24"}),oe=E("ul",{flexShrink:1,marginBottom:15,paddingRight:10,overflow:"hidden",overflowY:"auto"}),re=E("li",{display:"flex",alignItems:"center",padding:"5px 0"}),ae=E("a",{display:"block",textDecoration:"none"}),se={width:P,height:k,marginRight:10,border:"1px solid #888",overflow:"hidden"},ce=E("div",se),le=E("img",Object(g.a)(Object(g.a)({},se),{},{display:"block"})),ue=E("div",Object(g.a)(Object(g.a)({},se),{},{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontVariant:"14|18",color:"#888"})),de=E("p",{minWidth:200,marginRight:16}),he=E("a",{}),pe=E("button",{"+ button":{marginLeft:5}}),fe=E("button");function ve(e){var t=e.currentGames,n=e.setCurrentGames,o=Object(i.useRef)({}),r=J();return Object(i.useEffect)((function(){var e,n=!1,i=Object(b.a)(t);try{var a=function(){var t=e.value.id;try{var i=localStorage.getItem(X(t));if(i)return fetch(i).then((function(e){return e.blob()})).then((function(e){n||(o.current[t]={imageUrl:URL.createObjectURL(e)},r())})),"continue"}catch(a){console.error(a)}o.current[t]=ee};for(i.s();!(e=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}return function(){n=!0;for(var e=0,t=Object.values(o.current);e<t.length;e++){var i=t[e];i!==ee&&URL.revokeObjectURL(i.imageUrl)}}}),[]),Object(K.jsxs)(te,{children:[Object(K.jsx)(ne,{children:"Schematic"}),Object(K.jsx)(ie,{children:"Current schemas:"}),Object(K.jsx)(oe,{children:t.length?t.map((function(e,i){var r,a=e.id,s=e.title,c=o.current[a];return r=c===ee?Object(K.jsx)(ue,{children:"No preview"}):c?Object(K.jsx)(le,{src:c.imageUrl}):Object(K.jsx)(ce,{}),Object(K.jsxs)(re,{children:[Object(K.jsx)(ae,{href:"#".concat(a),children:r}),Object(K.jsx)(de,{children:Object(K.jsx)(he,{href:"#".concat(a),children:s})}),Object(K.jsx)(pe,{type:"button",onClick:function(e){e.preventDefault();var o=window.prompt("Enter new game name");o&&o.trim()&&n(t.map((function(e,t){return t===i?Object(g.a)(Object(g.a)({},e),{},{title:o}):e})))},children:"rename"}),Object(K.jsx)(pe,{type:"button",onClick:function(e){e.preventDefault();var o=window.prompt("Enter clone game name");if(o&&o.trim()){var r={id:u(t),title:o};Z.cloneGame(a,r.id),n(function(e,t,n){return[].concat(Object(y.a)(e.slice(0,n)),[t],Object(y.a)(e.slice(n)))}(t,r,i))}},children:"clone"}),Object(K.jsx)(pe,{type:"button",onClick:function(e){e.preventDefault(),window.confirm("Are you sure?")&&(n(t.filter((function(e){return e.id!==a}))),Z.removeGame(a))},children:"x"})]},a)})):Object(K.jsx)("div",{children:"no saved schemas"})}),Object(K.jsx)(fe,{type:"button",onClick:function(e){e.preventDefault();var i=u(t),o=window.prompt("Enter new game name");o&&o.trim()&&(n([].concat(Object(y.a)(t),[{id:i,title:o.trim()}])),window.setTimeout((function(){window.location.assign("#".concat(i))}),0))},children:"New schema"})]})}var me=n(44);function Oe(e){return Object(i.useRef)(e).current}function ye(e){if(!e)throw new Error;var t=e.getContext("2d");if(!t)throw new Error;return t}function be(e){var t=e.elementsCount,n=e.index,i=e.isInput,o=i?"ABCDEFGHIJ":"YZXWVUTSRQ";return!e.isVector&&t<=o.length?o.charAt(n):i?"I".concat(n):"Y".concat(n)}function ge(e,t){var n=t.gameState,i=t.size,o=t.densityFactor,r=t.assets,a=t.tick,c=n.pos,l=n.elements,u=n.connections,d=n.focusElement,h=n.hoverElement,p=n.wireElement,m=n.options,O=n.nodesSimulation;function y(e){var t=l.find((function(t){return t.id===e}));if(!t)throw new Error("Element ".concat(e," is not found"));return t}var g=new Map;if(O){var j,x=Object(b.a)(O);try{for(x.s();!(j=x.n()).done;){var E,w=j.value,S=Object(b.a)(w.pins);try{for(S.s();!(E=S.n()).done;){var P=E.value;g.set(P,w.state)}}catch(he){S.e(he)}finally{S.f()}}}catch(he){x.e(he)}finally{x.f()}}e.save(),e.clearRect(0,0,i.width*o,i.height*o),1!==o&&e.scale(o,o),e.translate(Math.floor(i.width/2)+c.x,Math.floor(i.height/2)+c.y),m.debugDrawAxis&&(e.save(),e.lineWidth=1,e.textBaseline="middle",e.textAlign="center",e.font="15px sans-serif",e.fillStyle="#333",e.beginPath(),e.moveTo(0,0),e.lineTo(100,0),e.moveTo(95,-5),e.lineTo(100,0),e.moveTo(95,5),e.lineTo(100,0),e.strokeStyle="#0f0",e.stroke(),e.fillText("X",90,15),e.beginPath(),e.moveTo(0,0),e.lineTo(0,100),e.moveTo(-5,95),e.lineTo(0,100),e.moveTo(5,95),e.lineTo(0,100),e.strokeStyle="#00f",e.stroke(),e.fillText("Y",12,90),e.restore());var k,D=Object(b.a)(l);try{for(D.s();!(k=D.n()).done;){var C=k.value,M=C.pos,U=h&&h.type===v.ELEMENT&&C.id===h.elId,R=d&&d.type===v.ELEMENT&&d.elId===C.id;(U||R)&&(e.save(),U?(e.strokeStyle=R?"#7f7fff":"#e5e5e5",e.lineWidth=3):(e.strokeStyle="#bebeff",e.lineWidth=2),e.strokeRect(M.x-26,M.y-26,52,52),e.restore())}}catch(he){D.e(he)}finally{D.f()}var L,G=0,W=Object(b.a)(u);try{for(W.s();!(L=W.n()).done;){var A=Object(s.a)(L.value,2),H=A[0],V=A[1],F=y(H.elId),B=y(V.elId),J=g.get(_(H)),Y=T[F.type].pins[H.pinIndex],z=T[B.type].pins[V.pinIndex];e.save(),e.beginPath(),e.moveTo(F.pos.x-24+Y.pos.x*N,F.pos.y-24+Y.pos.y*N),e.lineTo(B.pos.x-24+z.pos.x*N,B.pos.y-24+z.pos.y*N);var X=h&&h.type===v.CONNECTION&&h.connectionIndex===G,$=d&&d.type===v.CONNECTION&&d.connectionIndex===G,Q=1;X||$?Q=3:J===I.SHORT_CIRCUIT&&(Q=2);var Z="#333",q=!1,K=!1;J===I.SHORT_CIRCUIT?Z="#f00":J===I.POWER?(Z="#ff9038",q=!0,K=!0):J===I.GROUND?(Z="#aaaaff",q=!0,K=!0):J===I.IMPEDANCE?(Z="#c7c7c7",q=!0):X&&$?Z="#8080ff":$&&(Z="#bfbfff"),e.lineWidth=Q,e.strokeStyle=Z,q&&!X&&(K?e.setLineDash(a%2?[6,6]:[0,6,6,0]):e.setLineDash([4,11])),e.stroke(),e.restore(),G+=1}}catch(he){W.e(he)}finally{W.f()}if(p){var ee=p.elId,te=p.pinIndex,ne=y(ee),ie=T[ne.type].pins[te].pos,oe=ie.x*N+ne.pos.x-24,re=ie.y*N+ne.pos.y-24;if(p.pullPos){var ae=p.pullPos,se=ae.x,ce=ae.y;e.save(),e.beginPath(),e.moveTo(oe,re),e.lineTo(se,ce),e.strokeStyle="#888",e.stroke(),e.restore()}}var le,ue=Object(b.a)(l);try{var de=function(){var t=le.value,n=t.id,i=t.type,a=t.pos;if(i===f.INPUT||i===f.OUTPUT){var c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return be({elementsCount:e.length,index:e.indexOf(t),isInput:t.type===f.INPUT,isVector:n})}(l.filter((function(e){return e.type===i})),t,i===f.INPUT?m.isInputVector:m.isOutputVector);e.save(),e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",i===f.INPUT?e.fillText(c,a.x,a.y-10):e.fillText(c,a.x+6,a.y),e.restore()}else{var u,d=o>1.5?["x2","x1"]:["x1","x2"],O=Object(s.a)(d,2),y=O[0],j=O[1],x=null!==(u=r[y].images[i])&&void 0!==u?u:r[j].images[i];if(x){var E=a.x-24,w=a.y-24;e.drawImage(x,E,w,N,N)}}m.debugDrawId&&(e.textAlign="center",e.textBaseline="middle",e.font="16px sans-serif",e.fillText(n,a.x+24-6,a.y-24+6));var S,P=T[i].pins,k=0,D=Object(b.a)(P);try{for(D.s();!(S=D.n()).done;){var C,M=S.value,U=h&&h.type===v.PIN&&h.elId===t.id&&h.pinIndex===k,R=p&&p.elId===t.id&&p.pinIndex===k;e.beginPath(),e.arc(a.x+(M.pos.x-.5)*N,a.y+(M.pos.y-.5)*N,U||R?6:5,0,2*Math.PI),e.closePath();var L=g.get(_({elId:t.id,pinIndex:k})),G=void 0,W=!1;if([f.DOT,f.INPUT,f.OUTPUT,f.GROUND,f.POWER].includes(t.type))switch(L){case I.SHORT_CIRCUIT:G="#f00";break;case I.POWER:G="#ffc59b";break;case I.GROUND:G="#d4d4ff"}G||!U&&!R||(G=R?"#d66":"#66d",W=!0),e.save(),e.fillStyle=null!==(C=G)&&void 0!==C?C:"#fff",e.fill(),W||(e.strokeStyle="#448",e.lineWidth=2,e.stroke()),e.restore(),k+=1}}catch(he){D.e(he)}finally{D.f()}};for(ue.s();!(le=ue.n()).done;)de()}catch(he){ue.e(he)}finally{ue.f()}e.restore()}function je(){var e=Object(i.useState)(!0),t=Object(s.a)(e,2),n=t[0],o=t[1];return function(e,t){var n=h(t);Object(i.useEffect)((function(){return document.addEventListener(e,n,!1),function(){document.removeEventListener(e,n,!1)}}),[e,n])}("visibilitychange",(function(){var e="visible"===document.visibilityState;n!==e&&o(e)})),n}function xe(e,t){var n=je(),o=d(e);Object(i.useEffect)((function(){if(n&&o.current){var e=window.setInterval((function(){o.current&&o.current()}),t);return function(){window.clearInterval(e)}}}),[n,t,Boolean(o.current)])}var Ee=E("h2",{margin:0});function we(e){var t,n=q(e.gameModel,(function(e){return{elements:e.elements,connections:e.connections}})),i=n.elements,o=n.connections,r=[],a=Object(b.a)(i);try{for(a.s();!(t=a.n()).done;){var s,c=t.value,l=T[c.type].pins.map((function(){return!1})),u=Object(b.a)(o);try{for(u.s();!(s=u.n()).done;){var d,h=s.value,p=Object(b.a)(h);try{for(p.s();!(d=p.n()).done;){var f=d.value;f.elId===c.id&&(l[f.pinIndex]=!0)}}catch(v){p.e(v)}finally{p.f()}}}catch(v){u.e(v)}finally{u.f()}l.some((function(e){return!e}))&&r.push("Floating pins on node ".concat(c.type))}}catch(v){a.e(v)}finally{a.f()}return r.length?Object(K.jsxs)("div",{children:[Object(K.jsx)(Ee,{children:"Errors:"}),r.map((function(e,t){return Object(K.jsx)("div",{children:e},t)}))]}):null}var Ie=E("div",{position:"absolute",display:"flex",alignItems:"stretch",left:52,bottom:0,padding:4}),Se=E("h2",{marginRight:8,fontVariant:"20|30"}),Ne=E("div",{display:"flex",gap:4,variants:{reverse:{true:{flexDirection:"row-reverse"}}}}),Pe=E("label",{display:"grid",gridTemplateAreas:'"A"',width:30,height:30,userSelect:"none",cursor:"pointer","> *":{gridArea:"A"}}),ke=E("input",{opacity:0}),Te=E("div",{background:"#aaa","input:checked + &":{background:"#0d0"}}),De=E("p",{textAlign:"center",fontVariant:"16|30"});function Ce(e){var t=e.gameModel,n=q(t,(function(e){return{inputSignals:e.inputSignals,options:e.options}})),i=n.inputSignals,o=n.options;return i.length?Object(K.jsxs)(Ie,{children:[Object(K.jsx)(Se,{children:"Input signals:"}),Object(K.jsx)(Ne,{reverse:o.isInputVector,children:i.map((function(e,n){return Object(K.jsxs)(Pe,{children:[Object(K.jsx)(ke,{type:"checkbox",checked:e,onChange:function(e){var o=i.map((function(t,i){return i===n?e.target.checked:t}));t.updateInputSignals(o)}}),Object(K.jsx)(Te,{}),Object(K.jsx)(De,{children:be({elementsCount:i.length,index:n,isInput:!0,isVector:o.isInputVector})})]},n)}))})]}):null}var Me=E("div",{position:"absolute",display:"flex",flexDirection:"column",gap:4,top:0,left:0,padding:4,borderRadius:2}),Ue=E("button",{width:48,height:48,flexShrink:0,border:"none",color:"#333",background:"#dadada",fontVariant:"14|20",whiteSpace:"nowrap",appearance:"none","&:disabled":{color:"#999"},"&:not(:disabled)":{cursor:"pointer"}}),Re=E("span",{height:8});function Le(e){var t=e.gameModel,n=q(t,(function(e){return{focusElement:e.focusElement,autoSaves:e.options.autoSaves}})),i=n.focusElement,o=n.autoSaves;return Object(K.jsxs)(Me,{children:[Object(K.jsx)("a",{href:"#",title:"",children:Object(K.jsx)(Ue,{type:"button",children:"Menu"})}),Object(K.jsx)(Re,{}),Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.addElement(f.POWER)},children:"DD"}),Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.addElement(f.GROUND)},children:"GND"}),Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.addElement(f.NPN)},children:"npn"}),Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.addElement(f.PNP)},children:"pnp"}),Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.addElement(f.INPUT)},children:"input"}),Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.addElement(f.OUTPUT)},children:"output"}),Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.addElement(f.DOT)},children:"dot"}),Object(K.jsx)(Re,{}),Object(K.jsx)(Ue,{type:"button",disabled:!i,onClick:function(e){e.preventDefault(),t.deleteElementInFocus()},children:"delete"}),Object(K.jsx)(Re,{}),!o&&Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.reloadFromSave()},children:"Reload"}),Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.saveGame()},children:"Save"})]}),Object(K.jsx)(Ue,{type:"button",onClick:function(e){e.preventDefault(),t.clearState()},children:"Clear"})]})}var Ge=E("label",{userSelect:"none","> input:not(:disabled)":{cursor:"pointer"}});function We(e){var t=e.title,n=e.checked,i=e.onChange;return Object(K.jsxs)(Ge,{children:[Object(K.jsx)("input",{type:"checkbox",checked:n,onChange:function(e){i(e.target.checked)}})," ",t]})}var Ae=E("div",{display:"flex",flexDirection:"column","> *":{flexShrink:0}}),He=E("button",{marginBottom:5,border:"1px solid #999",borderRadius:0,appearance:"none",cursor:"pointer",variants:{active:{true:{color:"#fff",background:"lightgreen"}}}});function Ve(e){var t=e.gameModel,n=q(t,(function(e){return e.options}));function i(e){t.updateOptions(Object(g.a)(Object(g.a)({},n),e))}function o(e){var t=e.title,o=e.optionName;return Object(K.jsx)(We,{title:t,checked:n[o],onChange:function(e){i(Object(w.a)({},o,e))}})}return Object(K.jsxs)(Ae,{children:[Object(K.jsx)(He,{type:"button",active:n.simulate,onClick:function(e){e.preventDefault(),i({simulate:!n.simulate})},children:n.simulate?"Simulation: ON":"Simulation: OFF"}),Object(K.jsx)(o,{title:"Auto saves",optionName:"autoSaves"}),Object(K.jsx)(o,{title:"Debug: draw fps",optionName:"debugShowFps"}),Object(K.jsx)(o,{title:"Debug: draw id",optionName:"debugDrawId"}),Object(K.jsx)(o,{title:"Debug: draw axis",optionName:"debugDrawAxis"}),Object(K.jsx)(o,{title:"Treat input as vector",optionName:"isInputVector"}),Object(K.jsx)(o,{title:"Treat output as vector",optionName:"isOutputVector"})]})}var Fe=E("span",{color:"#4ebd4e"}),Be=E("span",{color:"#666"});function _e(e){return e?Object(K.jsx)(Fe,{children:"yes"}):Object(K.jsx)(Be,{children:"no"})}function Je(e){var t=q(e.gameModel,(function(e){return e})),n=t.elements,i=t.connections,o=t.movingElement,r=t.focusElement,a=t.hoverElement,s=t.wireElement,c=t.panState;return Object(K.jsxs)("div",{children:[Object(K.jsxs)("div",{children:["elements: ",n.length]}),Object(K.jsxs)("div",{children:["connections: ",i.length]}),Object(K.jsxs)("div",{children:["el moving: ",_e(o)]}),Object(K.jsxs)("div",{children:["el in focus:"," ",_e(r&&r.type===v.ELEMENT)]}),Object(K.jsxs)("div",{children:["conn in focus:"," ",_e(r&&r.type===v.CONNECTION)]}),Object(K.jsxs)("div",{children:["el hover:"," ",_e(a&&a.type===v.ELEMENT)]}),Object(K.jsxs)("div",{children:["pin hover: ",_e(a&&a.type===v.PIN)]}),Object(K.jsxs)("div",{children:["conn hover:"," ",_e(a&&a.type===v.CONNECTION)]}),Object(K.jsxs)("div",{children:["wiring: ",_e(s)]}),Object(K.jsxs)("div",{children:["drag: ",_e(c.isPan)]})]})}var Ye=E("main",{position:"relative",display:"flex",alignItems:"stretch",flexGrow:1,width:"100%",height:"100%",overflow:"hidden"}),ze=E("div",{position:"relative",flexGrow:1,overflow:"hidden"}),Xe=E("canvas",{display:"block",cursor:"initial",variants:{enableScaling:{true:{transformOrigin:"0 0",transform:"scale(var(--factor, 1))"}}}}),$e=E("span",{position:"absolute",top:6,right:6,userSelect:"none",pointerEvents:"none"}),Qe=E("span",{flexGrow:1}),Ze=E("div",{display:"none","@bp2":{display:"flex",flexShrink:0,flexDirection:"column",flexBasis:300,padding:"16px 20px",borderLeft:"1px solid #888",background:"#ddd",overflow:"hidden",overflowY:"auto","> *:not(:last-child)":{marginBottom:16}}});function qe(){var e;return null!==(e=window.devicePixelRatio)&&void 0!==e?e:1}function Ke(e){var t=e.gameId,n=Object(i.useRef)(null),o=Object(i.useRef)(null),r=J(),a=Object(i.useState)(0),c=Object(s.a)(a,2),l=c[0],u=c[1],d=Oe({value:qe()}),v=Object(i.useRef)(0),O=Object(i.useMemo)((function(){return Z.checkSavedGame(t)?Z.loadGame(t):Z.createEmptyModel(t)}),[t]);O.setPreviewHandler((function(){var e=n.current;if(e){var t=e.width,i=e.height,o=d.value;if(0!==t&&0!==i){var r=P*o,a=k*o,s=document.createElement("canvas");s.width=r,s.height=a;var c=ye(s);c.fillStyle="#fff",c.fillRect(0,0,r,a);var l=300*o,u=200*o;l>t&&(u=(l=t)/1.5),u>i&&(l=1.5*(u=i));var h=t/2-l/2,p=i/2-u/2;return c.drawImage(e,h,p,l,u,0,0,r,a),s.toDataURL()}}else console.warn("No canvas for getting preview")}));var y=q(O,(function(e){var t=e.cursor,n=e.options;return{cursor:t,showFps:n.debugShowFps,simulate:n.simulate}})),b=y.cursor,g=y.showFps,j=y.simulate,x=Oe({value:0});xe(g?function(){u(x.value),x.value=0}:void 0,1e3);var E=Oe({width:0,height:0}),w=function(e){var t=e.densityFactor,n=e.draw,o=Oe({x1:{images:{},status:m.NONE},x2:{images:{},status:m.NONE}});return Object(i.useEffect)((function(){var e=t>1.5,i=o[e?"x1":"x2"];if(i.status===m.NONE){var r=[f.PNP,f.NPN,f.POWER,f.GROUND],a=r.length;i.status=m.LOADING;for(var s=function(){var t=l[c],n=new Image;n.src="assets/".concat(t).concat(e?"@2x":"",".png"),n.addEventListener("load",(function(){i.images[t]=n,u()})),n.addEventListener("error",u)},c=0,l=r;c<l.length;c++)s()}function u(){0===(a-=1)&&(i.status=m.DONE,n())}}),[t]),o}({densityFactor:d.value,draw:function(){return T()}});function I(e){var t=e.x,n=e.y;return{x:Math.floor(t-E.width/2),y:Math.floor(n-E.height/2)}}function S(){var e=qe();return e!==d.value&&(d.value=e,r(),!0)}var N=h((function(){if(0!==E.width&&!S()){var e=ye(n.current);g&&(x.value+=1),ge(e,{gameState:O.getState(),size:E,densityFactor:d.value,assets:w,tick:v.current})}})),T=Object(i.useMemo)((function(){var e=1e3/60;return Object(me.a)(N,e,{maxWait:e,leading:!0,trailing:!0})}),[N]);function D(){var e=o.current,t=n.current;if(!e||!t)throw new Error;E.width=e.clientWidth,E.height=e.clientHeight,t.width=E.width*d.value,t.height=E.height*d.value,N()}return xe(j?function(){v.current+=1,T()}:void 0,500),Object(i.useEffect)((function(){return O.setDrawHandler(T),function(){O.destroy()}}),[]),Object(i.useLayoutEffect)(D,[d.value]),p("resize",(function(){setTimeout((function(){S(),D()}),0)})),Object(K.jsxs)(Ye,{children:[Object(K.jsxs)(ze,{ref:o,children:[Object(K.jsx)(Xe,{ref:n,enableScaling:1!==d.value,width:0,height:0,style:{"--factor":1/d.value,cursor:b},onClick:function(e){0===e.button&&e.preventDefault()},onMouseDown:function(e){0===e.button&&(e.preventDefault(),O.onMouseDown())},onMouseMove:function(e){O.onMouseMove({position:I({x:e.clientX,y:e.clientY}),movement:{x:e.movementX,y:e.movementY}})},onMouseUp:function(e){0===e.button&&(e.preventDefault(),O.onMouseUp())},onMouseLeave:function(){O.resetCursorState()},onContextMenu:function(e){O.allowOpenContextMenu()||e.preventDefault()}}),g&&Object(K.jsx)($e,{children:l})]}),Object(K.jsx)(Le,{gameModel:O}),Object(K.jsx)(Ce,{gameModel:O}),Object(K.jsxs)(Ze,{children:[Object(K.jsx)(Ve,{gameModel:O}),Object(K.jsx)(we,{gameModel:O}),Object(K.jsx)(Qe,{}),Object(K.jsx)(Je,{gameModel:O})]})]})}function et(e){var t,n=(null!==(t=window.location.hash)&&void 0!==t?t:"").trim().replace(/^#/,"");if(n){var i=l(n);if(i&&e.some((function(e){return e.id===i.gameId})))return i.gameId}}function tt(){var e=Object(i.useMemo)((function(){var e=localStorage.getItem("sch_games");return e?JSON.parse(e).map((function(e){return"string"===typeof e?{id:e,title:e}:e})):[]}),[]),t=Object(i.useState)(e),n=Object(s.a)(t,2),o=n[0],r=n[1];!function(e,t){var n=Object(i.useRef)(!1);Object(i.useEffect)((function(){n.current?e():n.current=!0}),t)}((function(){localStorage.setItem("sch_games",JSON.stringify(o))}),[o]);var a=Object(i.useState)(et(o)),c=Object(s.a)(a,2),l=c[0],d=c[1];return p("hashchange",(function(){var e=et(o);e!==l&&d(e)})),Object(i.useLayoutEffect)((function(){if(!o.length&&!l){var e=u(o);r([{id:e,title:"Untitled schema"}]),window.setTimeout((function(){window.location.assign("#".concat(e))}),0)}}),[]),l?Object(K.jsx)(Ke,{gameId:l},l):Object(K.jsx)(ve,{currentGames:o,setCurrentGames:r})}a.a.render(Object(K.jsx)(o.a.StrictMode,{children:Object(K.jsx)(tt,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.9274e45d.chunk.js.map