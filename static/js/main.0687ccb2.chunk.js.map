{"version":3,"sources":["components/App/App.module.scss","components/SchemaErrors/SchemaErrors.module.scss","components/Emulator/Emulator.module.scss","hooks/useOnChange.ts","hooks/useFunc.ts","hooks/useLatest.ts","common/types.ts","hooks/useRefState.ts","common/data.ts","common/common.ts","components/TruthTable/TruthTable.tsx","components/SchemaErrors/SchemaErrors.tsx","components/Emulator/Emulator.tsx","hooks/useForceUpdate.ts","components/App/App.tsx","hooks/useWindowEvent.ts","index.tsx","components/TruthTable/TruthTable.module.scss"],"names":["module","exports","useOnChange","callback","deps","initRef","useRef","useEffect","current","useFunc","callbackRef","some","ref","useLatest","useCallback","ElementType","useRefState","value","elementsDescriptions","PNP","pins","pos","x","y","NPN","POWER","GROUND","INPUT","OUTPUT","DOT","INPUT_LITERALS","OUTPUT_LITERALS","getLiteralForSignal","elements","element","isVector","index","indexOf","charVariants","type","length","charAt","TruthTable","options","onOptionsChange","useMemo","inputs","filter","el","outputs","renderInputs","renderOutputs","isInputVector","reverse","isOutputVector","className","styles","wrapper","option","checked","onChange","e","target","table","map","i","tableCell","Array","from","rowIndex","cellIndex","Math","floor","SchemaErrors","state","errors","used","connections","connection","p","elId","id","pinIndex","push","title","line","ICON_SIZE","FOCUS_SIZE","getNextId","lastElement","match","parseInt","Emulator","gameId","canvasRef","canvasWrapperRef","forceUpdate","incRef","useState","setInc","useForceUpdate","cursor","setCursor","setOptions","loadGameState","json","localStorage","getItem","JSON","parse","savedPos","savedOptions","clearState","window","setTimeout","draw","intervalId","setInterval","clearInterval","size","width","height","assets","mousePos","hoverElement","undefined","focusElement","movingElement","wireElement","source","mouseState","isMouseDown","isDrag","getElById","find","Error","ctx","getContext","clearRect","save","translate","strokeStyle","lineWidth","strokeRect","restore","p1","p2","el1","el2","pin1","pin2","beginPath","moveTo","lineTo","stroke","x0","y0","convertScreenCoordsToAppCoords","currentCursor","char","textAlign","textBaseline","font","fillText","img","drawImage","activeTarget","pin","isActive","activePin","isWire","arc","PIN_DOT_RADIUS","PI","closePath","fillStyle","fill","updateSize","app","canvas","clientWidth","clientHeight","checkOverlap","point","addElement","startWiring","addEventListener","loadImages","remainLoad","onLoad","imgName","image","Image","src","loadAssets","onMouseUp","preventDefault","button","needRepaint","hoverTarget","canvasWrapper","style","onClick","onMouseDown","onMouseMove","clientX","clientY","checkHover","isMoving","Boolean","movementX","movementY","onMouseLeave","resetCursorState","onContextMenu","panel","divider","setItem","stringify","console","info","href","update","space","debugPanel","yesNo","yes","no","getCurrentGameId","allowedIds","hash","location","trim","replace","includes","App","savedGames","currentGames","setCurrentGames","currentGameId","setCurrentGameId","eventName","func","removeEventListener","useWindowEvent","gamesTitle","removeButton","confirm","removeItem","newGameId","lastId","getNextGameId","assign","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0687ccb2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"App_wrapper__1Jn2B\",\"title\":\"App_title__2C-7r\",\"gamesTitle\":\"App_gamesTitle__zqWFJ\",\"removeButton\":\"App_removeButton__1M5gF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"SchemaErrors_title__DGpx-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"Emulator_app__T00XQ\",\"panel\":\"Emulator_panel__NbdHB\",\"button\":\"Emulator_button__3x9P5\",\"canvasWrapper\":\"Emulator_canvasWrapper__1jUgz\",\"canvas\":\"Emulator_canvas__18vZ6\",\"info\":\"Emulator_info__XN-lN\",\"divider\":\"Emulator_divider__1O1xo\",\"space\":\"Emulator_space__3sZL6\",\"yes\":\"Emulator_yes__2HVG8\",\"no\":\"Emulator_no__3K5j9\"};","import { useEffect, DependencyList, useRef } from 'react';\n\nexport function useOnChange(callback: () => void, deps: DependencyList) {\n  const initRef = useRef(false);\n\n  useEffect(() => {\n    if (!initRef.current) {\n      initRef.current = true;\n      return;\n    }\n\n    callback();\n  }, deps);\n}\n","import { useCallback } from 'react';\nimport { useLatest } from './useLatest';\n\nexport function useFunc<F extends (...args: any) => any>(callback: F): F {\n  const callbackRef = useLatest(callback);\n  // @ts-ignore\n  return useCallback((...args) => callbackRef.current(...args), []);\n}\n","import { useRef } from 'react';\n\nexport function useLatest<T>(some: T): { current: T } {\n  const ref = useRef(some);\n  ref.current = some;\n  return ref;\n}\n","export type GameId = `g${number}`;\n\nexport enum ElementType {\n  PNP = 'pnp',\n  NPN = 'npn',\n  POWER = 'power',\n  GROUND = 'ground',\n  INPUT = 'input',\n  OUTPUT = 'output',\n  DOT = 'dot',\n}\n\nexport type Coords = {\n  x: number;\n  y: number;\n};\n\nexport type ElementId = `el${number}`;\n\nexport type Element = {\n  type: ElementType;\n  id: ElementId;\n  pos: Coords;\n};\n\nexport type ConnectionPin = { elId: ElementId; pinIndex: number };\n\nexport type Connection = [ConnectionPin, ConnectionPin];\n\nexport type Pin = {\n  pos: Coords;\n};\n\nexport type ElementDescription = {\n  pins: Pin[];\n};\n\nexport type GameState = {\n  elements: Element[];\n  connections: Connection[];\n};\n\nexport type Options = {\n  isInputVector: boolean;\n  isOutputVector: boolean;\n};\n","import { useRef } from 'react';\n\nexport function useRefState<D>(value: D): D {\n  const ref = useRef<D>(value);\n  return ref.current;\n}\n","import { ElementType, ElementDescription } from './types';\n\nexport const elementsDescriptions: Record<ElementType, ElementDescription> = {\n  [ElementType.PNP]: {\n    pins: [\n      { pos: { x: 0.47, y: 0.94 } },\n      { pos: { x: -0.07, y: 0.32 } },\n      { pos: { x: 1.05, y: 0.32 } },\n    ],\n  },\n  [ElementType.NPN]: {\n    pins: [\n      { pos: { x: 0.47, y: 1 } },\n      { pos: { x: -0.07, y: 0.33 } },\n      { pos: { x: 1.05, y: 0.32 } },\n    ],\n  },\n  [ElementType.POWER]: {\n    pins: [{ pos: { x: 0.52, y: 0.8 } }],\n  },\n  [ElementType.GROUND]: {\n    pins: [{ pos: { x: 0.46, y: 0.15 } }],\n  },\n  [ElementType.INPUT]: {\n    pins: [{ pos: { x: 0.5, y: 0.8 } }],\n  },\n  [ElementType.OUTPUT]: {\n    pins: [{ pos: { x: 0.2, y: 0.5 } }],\n  },\n  [ElementType.DOT]: {\n    pins: [{ pos: { x: 0.5, y: 0.5 } }],\n  },\n};\n","import { Element, ElementType } from './types';\n\nconst INPUT_LITERALS = 'ABCDEFGHIJ';\nconst OUTPUT_LITERALS = 'YZXWVUTSRQ';\n\nexport function getLiteralForSignal(\n  elements: Element[],\n  element: Element,\n  isVector: boolean = false,\n) {\n  const index = elements.indexOf(element);\n\n  const charVariants =\n    element.type === ElementType.INPUT ? INPUT_LITERALS : OUTPUT_LITERALS;\n\n  if (!isVector && elements.length <= charVariants.length) {\n    return charVariants.charAt(index);\n  }\n\n  return element.type === ElementType.INPUT ? `I${index}` : `Y${index}`;\n}\n","import { useMemo } from 'react';\nimport { getLiteralForSignal } from '../../common/common';\nimport { Element, ElementType, Options } from '../../common/types';\n\nimport styles from './TruthTable.module.scss';\n\ntype Props = {\n  elements: Element[];\n  options: Options;\n  onOptionsChange: (update: Partial<Options>) => void;\n};\n\nexport function TruthTable({ elements, options, onOptionsChange }: Props) {\n  const { inputs, outputs, renderInputs, renderOutputs } = useMemo(() => {\n    const inputs = elements.filter((el) => el.type === ElementType.INPUT);\n    const outputs = elements.filter((el) => el.type === ElementType.OUTPUT);\n\n    let renderInputs = inputs;\n    let renderOutputs = outputs;\n\n    if (options.isInputVector) {\n      renderInputs = [...inputs].reverse();\n    }\n\n    if (options.isOutputVector) {\n      renderOutputs = [...outputs].reverse();\n    }\n\n    return {\n      inputs,\n      outputs,\n      renderInputs,\n      renderOutputs,\n    };\n  }, [elements.length, options.isInputVector, options.isOutputVector]);\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.options}>\n        <label className={styles.option}>\n          <input\n            type=\"checkbox\"\n            checked={options.isInputVector}\n            onChange={(e) => {\n              onOptionsChange({\n                isInputVector: e.target.checked,\n              });\n            }}\n          />{' '}\n          Treat input as vector\n        </label>\n        <label className={styles.option}>\n          <input\n            type=\"checkbox\"\n            checked={options.isOutputVector}\n            onChange={(e) => {\n              onOptionsChange({\n                isOutputVector: e.target.checked,\n              });\n            }}\n          />{' '}\n          Treat output as vector\n        </label>\n      </div>\n      <table className={styles.table}>\n        <thead>\n          <tr>\n            {renderInputs.map((el, i) => (\n              <th key={i} className={styles.tableCell}>\n                {getLiteralForSignal(inputs, el, options.isInputVector)}\n              </th>\n            ))}\n            {renderOutputs.map((el, i) => (\n              <th key={i} className={styles.tableCell}>\n                {getLiteralForSignal(outputs, el, options.isOutputVector)}\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {Array.from({ length: 2 ** inputs.length }).map((el, rowIndex) => (\n            <tr key={rowIndex}>\n              {renderInputs.map((value, cellIndex) => (\n                <td key={cellIndex}>\n                  {Math.floor(rowIndex / 2 ** (inputs.length - cellIndex - 1)) %\n                    2}\n                </td>\n              ))}\n              {renderOutputs.map((value, i) => (\n                <td key={i}>Z</td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","import type { GameState } from '../../common/types';\nimport { elementsDescriptions } from '../../common/data';\n\nimport styles from './SchemaErrors.module.scss';\n\ntype Props = {\n  state: GameState;\n};\n\nexport function SchemaErrors({ state }: Props) {\n  const errors = [];\n\n  for (const el of state.elements) {\n    const { pins } = elementsDescriptions[el.type];\n    const used = pins.map(() => false);\n\n    for (const connection of state.connections) {\n      for (const p of connection) {\n        if (p.elId === el.id) {\n          used[p.pinIndex] = true;\n        }\n      }\n    }\n\n    if (used.some((value) => !value)) {\n      errors.push(`Floating pins on node ${el.type}`);\n    }\n  }\n\n  if (!errors.length) {\n    return null;\n  }\n\n  return (\n    <div>\n      <h2 className={styles.title}>Errors:</h2>\n      {errors.map((line, i) => (\n        <div key={i}>{line}</div>\n      ))}\n    </div>\n  );\n}\n","import { MouseEvent, useEffect, useRef, useState } from 'react';\n\nimport { useRefState } from '../../hooks/useRefState';\nimport { useForceUpdate } from '../../hooks/useForceUpdate';\nimport {\n  Coords,\n  Element,\n  ElementId,\n  ElementType,\n  GameId,\n  GameState,\n  Options,\n} from '../../common/types';\nimport { elementsDescriptions } from '../../common/data';\nimport { getLiteralForSignal } from '../../common/common';\nimport { useFunc } from '../../hooks/useFunc';\nimport { useOnChange } from '../../hooks/useOnChange';\nimport { TruthTable } from '../TruthTable';\nimport { SchemaErrors } from '../SchemaErrors';\n\nimport styles from './Emulator.module.scss';\n\nconst ICON_SIZE = 48;\nconst FOCUS_SIZE = ICON_SIZE + 4;\nconst PIN_DOT_RADIUS = 5;\n\ntype Cursor =\n  | 'move'\n  | 'pointer'\n  | 'drag'\n  | 'grab'\n  | 'grabbing'\n  | 'cross'\n  | undefined;\n\ntype HoverTarget = {\n  elId: ElementId;\n  activePin: { index: number } | undefined;\n};\n\nfunction getNextId(state: GameState): ElementId {\n  const lastElement = state.elements[state.elements.length - 1];\n\n  if (!lastElement) {\n    return `el1`;\n  }\n\n  const match = lastElement.id.match(/^el(\\d+)$/)!;\n\n  return `el${parseInt(match[1], 10) + 1}`;\n}\n\ntype Props = {\n  gameId: GameId;\n};\n\nexport function Emulator({ gameId }: Props) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const canvasWrapperRef = useRef<HTMLDivElement>(null);\n  const forceUpdate = useForceUpdate();\n  const [cursor, setCursor] = useState<Cursor>();\n  const [options, setOptions] = useState<Options>({\n    isInputVector: false,\n    isOutputVector: false,\n  });\n\n  const loadGameState = useFunc(() => {\n    const json = localStorage.getItem(`sch_game_${gameId}`);\n\n    if (!json) {\n      return;\n    }\n\n    const {\n      pos: savedPos,\n      elements,\n      connections,\n      options: savedOptions,\n    } = JSON.parse(json);\n\n    clearState();\n\n    pos.x = savedPos.x;\n    pos.y = savedPos.y;\n    state.elements = elements;\n    state.connections = connections;\n\n    setOptions(savedOptions);\n\n    window.setTimeout(draw, 0);\n  });\n\n  useEffect(() => {\n    loadGameState();\n\n    const intervalId = window.setInterval(forceUpdate, 500);\n\n    return () => {\n      window.clearInterval(intervalId);\n    };\n  }, []);\n\n  const size = useRefState({ width: 0, height: 0 });\n  const pos = useRefState({ x: 0, y: 0 });\n  const assets = useRefState<Record<string, any>>({});\n  const mousePos = useRefState({ x: 0, y: 0 });\n  const hoverElement = useRefState<{\n    target: HoverTarget | undefined;\n  }>({\n    target: undefined,\n  });\n  const focusElement = useRefState<{ elId: ElementId | undefined }>({\n    elId: undefined,\n  });\n  const movingElement = useRefState<{\n    target: { elId: ElementId } | undefined;\n  }>({\n    target: undefined,\n  });\n  const wireElement = useRefState<{\n    source: { elId: ElementId; pinIndex: number } | undefined;\n  }>({\n    source: undefined,\n  });\n  const state = useRefState<GameState>({\n    elements: [],\n    connections: [],\n  });\n  const mouseState = useRefState({ isMouseDown: false, isDrag: false });\n\n  // @ts-ignore\n  window.state = state;\n\n  const getElById = useFunc((id: ElementId): Element => {\n    const el = state.elements.find((el) => el.id === id);\n\n    if (!el) {\n      throw new Error('Element not found');\n    }\n\n    return el;\n  });\n\n  const draw = useFunc(() => {\n    const ctx = canvasRef.current!.getContext('2d');\n\n    if (!ctx) {\n      throw new Error();\n    }\n\n    ctx.clearRect(0, 0, size.width, size.height);\n\n    ctx.save();\n    ctx.translate(size.width / 2 + pos.x + 0.5, size.height / 2 + pos.y + 0.5);\n\n    for (const element of state.elements) {\n      const { pos } = element;\n\n      if (element.id === hoverElement.target?.elId) {\n        ctx.save();\n        ctx.strokeStyle = '#ddf';\n        ctx.lineWidth = 3;\n        ctx.strokeRect(\n          pos.x - FOCUS_SIZE / 2,\n          pos.y - FOCUS_SIZE / 2,\n          FOCUS_SIZE,\n          FOCUS_SIZE,\n        );\n        ctx.restore();\n      } else if (element.id === focusElement.elId) {\n        ctx.save();\n        ctx.strokeStyle = '#ededf3';\n        ctx.lineWidth = 2;\n        ctx.strokeRect(\n          pos.x - FOCUS_SIZE / 2,\n          pos.y - FOCUS_SIZE / 2,\n          FOCUS_SIZE,\n          FOCUS_SIZE,\n        );\n        ctx.restore();\n      }\n    }\n\n    for (const [p1, p2] of state.connections) {\n      const el1 = getElById(p1.elId);\n      const el2 = getElById(p2.elId);\n\n      const pin1 = elementsDescriptions[el1.type].pins[p1.pinIndex];\n      const pin2 = elementsDescriptions[el2.type].pins[p2.pinIndex];\n\n      ctx.save();\n      ctx.beginPath();\n      ctx.moveTo(\n        el1.pos.x - ICON_SIZE / 2 + pin1.pos.x * ICON_SIZE,\n        el1.pos.y - ICON_SIZE / 2 + pin1.pos.y * ICON_SIZE,\n      );\n      ctx.lineTo(\n        el2.pos.x - ICON_SIZE / 2 + pin2.pos.x * ICON_SIZE,\n        el2.pos.y - ICON_SIZE / 2 + pin2.pos.y * ICON_SIZE,\n      );\n      ctx.strokeStyle = '#333';\n      ctx.stroke();\n      ctx.restore();\n    }\n\n    if (wireElement.source) {\n      const { elId, pinIndex } = wireElement.source;\n      const el = getElById(elId);\n\n      const { pos } = elementsDescriptions[el.type].pins[pinIndex];\n\n      const x0 = pos.x * ICON_SIZE + el.pos.x - ICON_SIZE / 2;\n      const y0 = pos.y * ICON_SIZE + el.pos.y - ICON_SIZE / 2;\n\n      const { x, y } = convertScreenCoordsToAppCoords(mousePos);\n\n      ctx.save();\n      ctx.beginPath();\n      ctx.moveTo(x0, y0);\n      ctx.lineTo(x, y);\n      ctx.strokeStyle = '#888';\n      ctx.stroke();\n      ctx.restore();\n    }\n\n    for (const element of state.elements) {\n      const { type, pos } = element;\n\n      if (type === ElementType.INPUT || type === ElementType.OUTPUT) {\n        const char = getLiteralForSignal(\n          state.elements.filter((el) => el.type === type),\n          element,\n          type === ElementType.INPUT\n            ? options.isInputVector\n            : options.isOutputVector,\n        );\n\n        ctx.save();\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.font = '24px sans-serif';\n        if (type === ElementType.INPUT) {\n          ctx.fillText(char, pos.x, pos.y - 10);\n        } else {\n          ctx.fillText(char, pos.x + 6, pos.y);\n        }\n        ctx.restore();\n      } else {\n        const img = assets[type];\n\n        if (img) {\n          const x0 = pos.x - ICON_SIZE / 2;\n          const y0 = pos.y - ICON_SIZE / 2;\n\n          ctx.drawImage(img, x0, y0, ICON_SIZE, ICON_SIZE);\n        }\n      }\n\n      const { pins } = elementsDescriptions[type];\n      const activeTarget = hoverElement.target;\n      let i = 0;\n\n      for (const pin of pins) {\n        const isActive =\n          activeTarget &&\n          element.id === activeTarget.elId &&\n          activeTarget.activePin &&\n          activeTarget.activePin.index === i;\n\n        const isWire =\n          wireElement.source &&\n          wireElement.source.elId === element.id &&\n          wireElement.source.pinIndex === i;\n\n        ctx.beginPath();\n        ctx.arc(\n          pos.x + (pin.pos.x - 0.5) * ICON_SIZE,\n          pos.y + (pin.pos.y - 0.5) * ICON_SIZE,\n          isActive ? PIN_DOT_RADIUS + 1 : PIN_DOT_RADIUS,\n          0,\n          Math.PI * 2,\n        );\n        ctx.closePath();\n\n        if (isActive || isWire) {\n          ctx.save();\n          ctx.fillStyle = isWire ? '#d66' : '#66d';\n          ctx.fill();\n          ctx.restore();\n        } else {\n          ctx.save();\n          ctx.fillStyle = '#fff';\n          ctx.fill();\n          ctx.strokeStyle = '#448';\n          ctx.lineWidth = 2;\n          ctx.stroke();\n          ctx.restore();\n        }\n        i++;\n      }\n    }\n\n    ctx.restore();\n\n    let currentCursor: Cursor;\n\n    if (wireElement.source) {\n      currentCursor = 'pointer';\n    } else if (hoverElement.target?.activePin) {\n      currentCursor = 'pointer';\n    } else if (hoverElement.target) {\n      currentCursor = 'move';\n    } else if (mouseState.isDrag) {\n      currentCursor = 'grabbing';\n    }\n\n    if (currentCursor !== cursor) {\n      setCursor(currentCursor);\n    }\n  });\n\n  function convertScreenCoordsToAppCoords({ x, y }: Coords): Coords {\n    return {\n      x: x - size.width / 2 - pos.x,\n      y: y - size.height / 2 - pos.y,\n    };\n  }\n\n  function checkHover(): boolean {\n    const { x, y } = convertScreenCoordsToAppCoords(mousePos);\n    const activeTarget = hoverElement.target;\n\n    for (const element of state.elements) {\n      const { pins } = elementsDescriptions[element.type];\n\n      const x0 = element.pos.x - ICON_SIZE / 2;\n      const y0 = element.pos.y - ICON_SIZE / 2;\n\n      for (const pin of pins) {\n        if (\n          (x0 + pin.pos.x * ICON_SIZE - x) ** 2 +\n            (y0 + pin.pos.y * ICON_SIZE - y) ** 2 <\n          (PIN_DOT_RADIUS + 4) ** 2\n        ) {\n          const pinIndex = pins.indexOf(pin);\n          const hoverTarget = hoverElement.target;\n\n          if (\n            !hoverTarget ||\n            hoverTarget.elId !== element.id ||\n            hoverTarget.activePin?.index !== pinIndex\n          ) {\n            hoverElement.target = {\n              elId: element.id,\n              activePin: {\n                index: pinIndex,\n              },\n            };\n            return true;\n          }\n          return false;\n        }\n      }\n    }\n\n    for (const element of state.elements) {\n      const x0 = element.pos.x - ICON_SIZE / 2;\n      const y0 = element.pos.y - ICON_SIZE / 2;\n\n      if (x > x0 && x < x0 + ICON_SIZE && y > y0 && y < y0 + ICON_SIZE) {\n        if (\n          !activeTarget ||\n          activeTarget.elId !== element.id ||\n          activeTarget.activePin\n        ) {\n          hoverElement.target = {\n            elId: element.id,\n            activePin: undefined,\n          };\n          return true;\n        }\n        return false;\n      }\n    }\n\n    if (hoverElement.target) {\n      hoverElement.target = undefined;\n      return true;\n    }\n\n    return false;\n  }\n\n  function updateSize() {\n    setTimeout(() => {\n      const app = canvasWrapperRef.current!;\n      const canvas = canvasRef.current!;\n\n      size.width = app.clientWidth;\n      size.height = app.clientHeight;\n\n      canvas.width = size.width;\n      canvas.height = size.height;\n\n      draw();\n    }, 0);\n  }\n\n  function checkOverlap(point: Coords): boolean {\n    for (const { pos } of state.elements) {\n      if (\n        (pos.x - point.x) ** 2 + (pos.y - point.y) ** 2 <\n        (ICON_SIZE / 2) ** 2\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function addElement(type: ElementType) {\n    const pos = convertScreenCoordsToAppCoords({\n      x: size.width / 2,\n      y: size.height / 2,\n    });\n\n    while (checkOverlap(pos)) {\n      pos.x += ICON_SIZE + 20;\n    }\n\n    state.elements.push({\n      type: type,\n      id: getNextId(state),\n      pos,\n    });\n    draw();\n  }\n\n  function clearState() {\n    pos.x = 0;\n    pos.y = 0;\n    state.elements = [];\n    state.connections = [];\n    hoverElement.target = undefined;\n    focusElement.elId = undefined;\n    movingElement.target = undefined;\n    wireElement.source = undefined;\n    mouseState.isDrag = false;\n    mouseState.isMouseDown = false;\n  }\n\n  function loadAssets() {\n    const loadImages = [\n      ElementType.PNP,\n      ElementType.NPN,\n      ElementType.POWER,\n      ElementType.GROUND,\n    ];\n\n    let remainLoad = loadImages.length;\n\n    function onLoad() {\n      remainLoad--;\n\n      if (remainLoad === 0) {\n        draw();\n      }\n    }\n\n    for (const imgName of loadImages) {\n      const image = new Image();\n      image.src = `assets/${imgName}.png`;\n      image.addEventListener('load', onLoad);\n\n      assets[imgName] = image;\n    }\n  }\n\n  useEffect(() => {\n    updateSize();\n\n    window.addEventListener('resize', updateSize);\n\n    loadAssets();\n  }, []);\n\n  useOnChange(draw, [options]);\n\n  function resetCursorState() {\n    let needRepaint = false;\n\n    if (mouseState.isMouseDown) {\n      mouseState.isMouseDown = false;\n    }\n\n    if (movingElement.target) {\n      movingElement.target = undefined;\n      needRepaint = true;\n    }\n\n    if (mouseState.isDrag) {\n      mouseState.isDrag = false;\n      needRepaint = true;\n    }\n\n    if (wireElement.source) {\n      wireElement.source = undefined;\n      needRepaint = true;\n    }\n\n    return needRepaint;\n  }\n\n  function startWiring({\n    elId,\n    pinIndex,\n  }: {\n    elId: ElementId;\n    pinIndex: number;\n  }) {\n    focusElement.elId = elId;\n    wireElement.source = {\n      elId: elId,\n      pinIndex,\n    };\n    // state.connections = state.connections.filter(\n    //   ([p1, p2]) => p1.elId !== elId && p2.elId !== elId,\n    // );\n  }\n\n  const onMouseUp = useFunc((e?: MouseEvent) => {\n    if (e) {\n      e.preventDefault();\n\n      if (e.button !== 0) {\n        return;\n      }\n    }\n\n    let needRepaint = false;\n\n    mouseState.isMouseDown = false;\n\n    if (focusElement.elId && !wireElement.source && !movingElement.target) {\n      focusElement.elId = undefined;\n      needRepaint = true;\n    }\n\n    if (movingElement.target) {\n      movingElement.target = undefined;\n      needRepaint = true;\n    }\n\n    if (mouseState.isDrag) {\n      mouseState.isDrag = false;\n      needRepaint = true;\n    }\n\n    if (wireElement.source) {\n      const activeTarget = hoverElement.target;\n\n      if (\n        activeTarget &&\n        activeTarget.activePin &&\n        wireElement.source.elId !== activeTarget.elId\n      ) {\n        state.connections.push([\n          {\n            elId: activeTarget.elId,\n            pinIndex: activeTarget.activePin.index,\n          },\n          {\n            elId: wireElement.source.elId,\n            pinIndex: wireElement.source.pinIndex,\n          },\n        ]);\n      }\n\n      wireElement.source = undefined;\n      needRepaint = true;\n    } else {\n      if (!wireElement.source) {\n        const hoverTarget = hoverElement.target;\n\n        if (hoverTarget && hoverTarget.activePin) {\n          startWiring({\n            elId: hoverTarget.elId,\n            pinIndex: hoverTarget.activePin.index,\n          });\n          needRepaint = true;\n        }\n\n        if (hoverTarget && !hoverTarget.activePin) {\n          if (focusElement.elId !== hoverTarget.elId) {\n            focusElement.elId = hoverTarget.elId;\n            needRepaint = true;\n          }\n        }\n      }\n    }\n\n    if (needRepaint) {\n      draw();\n    }\n  });\n\n  return (\n    <main className={styles.app}>\n      <div ref={canvasWrapperRef} className={styles.canvasWrapper}>\n        <canvas\n          ref={canvasRef}\n          className={styles.canvas}\n          style={cursor ? { cursor } : undefined}\n          onClick={(e) => {\n            e.preventDefault();\n          }}\n          onMouseDown={(e) => {\n            e.preventDefault();\n\n            if (e.button !== 0) {\n              return;\n            }\n\n            if (mouseState.isMouseDown) {\n              onMouseUp();\n            }\n\n            mouseState.isMouseDown = true;\n          }}\n          onMouseMove={(e) => {\n            mousePos.x = e.clientX;\n            mousePos.y = e.clientY;\n\n            let needRepaint = false;\n\n            if (checkHover()) {\n              needRepaint = true;\n            }\n\n            const isMoving = Boolean(movingElement.target);\n            const hoverTarget = hoverElement.target;\n\n            if (mouseState.isMouseDown) {\n              if (\n                !isMoving &&\n                !wireElement.source &&\n                hoverTarget &&\n                hoverTarget.activePin\n              ) {\n                startWiring({\n                  elId: hoverTarget.elId,\n                  pinIndex: hoverTarget.activePin.index,\n                });\n                needRepaint = true;\n              }\n\n              if (!isMoving && wireElement.source) {\n                needRepaint = true;\n              }\n\n              if (!isMoving && !wireElement.source && hoverTarget) {\n                movingElement.target = {\n                  elId: hoverTarget.elId,\n                };\n                focusElement.elId = hoverTarget.elId;\n                needRepaint = true;\n              }\n\n              if (\n                !wireElement.source &&\n                !movingElement.target &&\n                !mouseState.isDrag\n              ) {\n                mouseState.isDrag = true;\n                needRepaint = true;\n              }\n\n              if (movingElement.target) {\n                const el = getElById(movingElement.target.elId);\n                el.pos.x += e.movementX;\n                el.pos.y += e.movementY;\n              } else if (!wireElement.source) {\n                pos.x += e.movementX;\n                pos.y += e.movementY;\n              }\n\n              needRepaint = true;\n            } else {\n              if (mouseState.isDrag) {\n                mouseState.isDrag = false;\n                needRepaint = true;\n              }\n            }\n\n            if (wireElement.source) {\n              needRepaint = true;\n            }\n\n            if (needRepaint) {\n              draw();\n            }\n          }}\n          onMouseUp={onMouseUp}\n          onMouseLeave={() => {\n            if (resetCursorState()) {\n              draw();\n            }\n          }}\n          onContextMenu={(e) => {\n            if (\n              hoverElement.target ||\n              wireElement.source ||\n              mouseState.isDrag\n            ) {\n              e.preventDefault();\n            }\n          }}\n        />\n      </div>\n      <div className={styles.panel}>\n        <button\n          className={styles.button}\n          onClick={() => {\n            addElement(ElementType.POWER);\n          }}\n        >\n          DD\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            addElement(ElementType.GROUND);\n          }}\n        >\n          GND\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            addElement(ElementType.NPN);\n          }}\n        >\n          npn\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            addElement(ElementType.PNP);\n          }}\n        >\n          pnp\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            addElement(ElementType.INPUT);\n          }}\n        >\n          input\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            addElement(ElementType.OUTPUT);\n          }}\n        >\n          output\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            addElement(ElementType.DOT);\n          }}\n        >\n          dot\n        </button>\n        <span className={styles.divider} />\n        <button\n          className={styles.button}\n          onClick={(e) => {\n            e.preventDefault();\n            loadGameState();\n          }}\n        >\n          Load\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            localStorage.setItem(\n              `sch_game_${gameId}`,\n              JSON.stringify({\n                pos,\n                elements: state.elements,\n                connections: state.connections,\n                options,\n              }),\n            );\n            console.info('Saved');\n          }}\n        >\n          Save\n        </button>\n        <button\n          className={styles.button}\n          onClick={() => {\n            clearState();\n            draw();\n          }}\n        >\n          Clear\n        </button>\n        <a href=\"#\">\n          <button className={styles.button}>Exit</button>\n        </a>\n      </div>\n      <div className={styles.info}>\n        <TruthTable\n          elements={state.elements}\n          options={options}\n          onOptionsChange={(update) =>\n            setOptions({\n              ...options,\n              ...update,\n            })\n          }\n        />\n        <SchemaErrors state={state} />\n        <span className={styles.space} />\n        <div className={styles.debugPanel}>\n          <div>elements: {state.elements.length}</div>\n          <div>connections: {state.connections.length}</div>\n          <div>el moving: {yesNo(movingElement.target)}</div>\n          <div>el in focus: {yesNo(focusElement.elId)}</div>\n          <div>el hover: {yesNo(hoverElement.target)}</div>\n          <div>pin hover: {yesNo(hoverElement.target?.activePin)}</div>\n          <div>wiring: {yesNo(wireElement.source)}</div>\n          <div>drag: {yesNo(mouseState.isDrag)}</div>\n          <div>mouse down: {yesNo(mouseState.isMouseDown)}</div>\n        </div>\n      </div>\n    </main>\n  );\n}\n\nfunction yesNo(value: unknown) {\n  if (value) {\n    return <span className={styles.yes}>yes</span>;\n  }\n\n  return <span className={styles.no}>no</span>;\n}\n","import { useCallback, useRef, useState } from 'react';\n\nexport function useForceUpdate() {\n  const incRef = useRef(0);\n  const [, setInc] = useState(incRef.current);\n\n  return useCallback(() => {\n    setInc(++incRef.current);\n  }, []);\n}\n","import { useMemo, useState } from 'react';\n\nimport { GameId } from '../../common/types';\nimport { useOnChange } from '../../hooks/useOnChange';\nimport { useWindowEvent } from '../../hooks/useWindowEvent';\nimport { Emulator } from '../Emulator';\n\nimport styles from './App.module.scss';\n\nfunction getCurrentGameId(allowedIds: GameId[]): GameId | undefined {\n  const hash = (window.location.hash ?? '').trim().replace(/^#/, '');\n\n  if (hash) {\n    const match = hash.match(/^g(\\d+)$/);\n\n    if (match) {\n      const id = match[0] as GameId;\n\n      if (allowedIds.includes(id)) {\n        return id;\n      }\n    }\n  }\n\n  return undefined;\n}\n\nfunction getNextGameId(currentGames: GameId[]): GameId {\n  const lastId = currentGames[currentGames.length - 1];\n\n  if (!lastId) {\n    return `g1`;\n  }\n\n  const match = lastId.match(/^g(\\d+)$/)!;\n\n  return `g${parseInt(match[1], 10) + 1}`;\n}\n\nexport function App() {\n  const savedGames = useMemo<GameId[]>(() => {\n    const json = localStorage.getItem('sch_games');\n    if (!json) {\n      return [];\n    }\n    return JSON.parse(json);\n  }, []);\n  const [currentGames, setCurrentGames] = useState(savedGames);\n\n  useOnChange(() => {\n    localStorage.setItem('sch_games', JSON.stringify(currentGames));\n  }, [currentGames]);\n\n  const [currentGameId, setCurrentGameId] = useState(\n    getCurrentGameId(currentGames),\n  );\n\n  useWindowEvent('hashchange', () => {\n    const gameId = getCurrentGameId(currentGames);\n\n    if (gameId !== currentGameId) {\n      setCurrentGameId(gameId);\n    }\n  });\n\n  if (currentGameId) {\n    return <Emulator key={currentGameId} gameId={currentGameId} />;\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <h1 className={styles.title}>Schematic</h1>\n      <h2 className={styles.gamesTitle}>Current schemas:</h2>\n      <ul>\n        {currentGames.length ? (\n          currentGames.map((gameId) => (\n            <li key={gameId}>\n              <a href={`#${gameId}`}>{gameId}</a>{' '}\n              <button\n                type=\"button\"\n                className={styles.removeButton}\n                onClick={(e) => {\n                  e.preventDefault();\n\n                  if (window.confirm('Are you sure?')) {\n                    setCurrentGames(currentGames.filter((id) => id !== gameId));\n                    localStorage.removeItem(`sch_game_${gameId}`);\n                  }\n                }}\n              >\n                x\n              </button>\n            </li>\n          ))\n        ) : (\n          <div>no saved schemas</div>\n        )}\n      </ul>\n      <button\n        type=\"button\"\n        onClick={(e) => {\n          e.preventDefault();\n          const newGameId = getNextGameId(currentGames);\n          setCurrentGames([...currentGames, newGameId]);\n\n          window.setTimeout(() => {\n            window.location.assign(`#${newGameId}`);\n          }, 0);\n        }}\n      >\n        New schema\n      </button>\n    </div>\n  );\n}\n","import { useEffect } from 'react';\nimport { useFunc } from './useFunc';\n\nexport function useWindowEvent(\n  eventName: string,\n  callback: (...args: unknown[]) => void,\n) {\n  const func = useFunc(callback);\n\n  useEffect(() => {\n    window.addEventListener(eventName, func, false);\n\n    return () => {\n      window.removeEventListener(eventName, func, false);\n    };\n  }, []);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.scss';\nimport { App } from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"TruthTable_wrapper__23wrn\",\"options\":\"TruthTable_options__kzZt2\",\"option\":\"TruthTable_option__1Hqnt\"};"],"sourceRoot":""}