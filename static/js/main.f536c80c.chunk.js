(this.webpackJsonpschematic=this.webpackJsonpschematic||[]).push([[0],{17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(10),c=n.n(o),a=(n(16),n(17),n(4)),s=n(3),l=n(11),u=Object(l.a)({theme:{colors:{gray400:"gainsboro",gray500:"lightgray"}},media:{bp1:"(min-width: 480px)",bp2:"(min-width: 768px)"},utils:{fontVariant:function(e){var t=e.split("|"),n=Object(s.a)(t,2),r=n[0],i=n[1];return{fontSize:"".concat(r,"px"),lineHeight:"".concat(i,"px")}}}}),d=u.styled;u.css,u.globalCss,u.keyframes,u.getCssText,u.theme,u.createTheme,u.config;function f(e,t){var n=Object(r.useRef)(!1);Object(r.useEffect)((function(){n.current?e():n.current=!0}),t)}function p(e){var t=function(e){var t=Object(r.useRef)(e);return t.current=e,t}(e);return Object(r.useCallback)((function(){return t.current.apply(t,arguments)}),[])}function v(e,t){var n=p(t);Object(r.useEffect)((function(){return window.addEventListener(e,n,!1),function(){window.removeEventListener(e,n,!1)}}),[e,n])}var h,x=n(6),O=n(2);function j(e){return Object(r.useRef)(e).current}!function(e){e.PNP="pnp",e.NPN="npn",e.POWER="power",e.GROUND="ground",e.INPUT="input",e.OUTPUT="output",e.DOT="dot"}(h||(h={}));var b,y=n(5),g=(b={},Object(y.a)(b,h.PNP,{pins:[{pos:{x:.47,y:.94}},{pos:{x:-.07,y:.32}},{pos:{x:1.05,y:.32}}]}),Object(y.a)(b,h.NPN,{pins:[{pos:{x:.47,y:1}},{pos:{x:-.07,y:.33}},{pos:{x:1.05,y:.32}}]}),Object(y.a)(b,h.POWER,{pins:[{pos:{x:.52,y:.8}}]}),Object(y.a)(b,h.GROUND,{pins:[{pos:{x:.46,y:.15}}]}),Object(y.a)(b,h.INPUT,{pins:[{pos:{x:.5,y:.8}}]}),Object(y.a)(b,h.OUTPUT,{pins:[{pos:{x:.2,y:.5}}]}),Object(y.a)(b,h.DOT,{pins:[{pos:{x:.5,y:.5}}]}),b),m="ABCDEFGHIJ",E="YZXWVUTSRQ";function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.indexOf(t),i=t.type===h.INPUT?m:E;return!n&&e.length<=i.length?i.charAt(r):t.type===h.INPUT?"I".concat(r):"Y".concat(r)}var N=n(0),T=d("table",{"> thead > tr > th":{textAlign:"center",fontWeight:700},"> tbody > tr > td":{textAlign:"center",fontWeight:400}}),w=d("div",{display:"flex",flexDirection:"column",marginBottom:10}),P=d("label",{userSelect:"none","> input:not(:disabled)":{cursor:"pointer"}});function M(e){var t=e.elements,n=e.options,i=e.onOptionsChange,o=Object(r.useMemo)((function(){var e=t.filter((function(e){return e.type===h.INPUT})),r=t.filter((function(e){return e.type===h.OUTPUT})),i=e,o=r;return n.isInputVector&&(i=Object(a.a)(e).reverse()),n.isOutputVector&&(o=Object(a.a)(r).reverse()),{inputs:e,outputs:r,renderInputs:i,renderOutputs:o}}),[t,t.length,n.isInputVector,n.isOutputVector]),c=o.inputs,s=o.outputs,l=o.renderInputs,u=o.renderOutputs;return Object(N.jsxs)("div",{children:[Object(N.jsxs)(w,{children:[Object(N.jsxs)(P,{children:[Object(N.jsx)("input",{type:"checkbox",checked:n.isInputVector,onChange:function(e){i({isInputVector:e.target.checked})}})," ","Treat input as vector"]}),Object(N.jsxs)(P,{children:[Object(N.jsx)("input",{type:"checkbox",checked:n.isOutputVector,onChange:function(e){i({isOutputVector:e.target.checked})}})," ","Treat output as vector"]})]}),Object(N.jsxs)(T,{children:[Object(N.jsx)("thead",{children:Object(N.jsxs)("tr",{children:[l.map((function(e,t){return Object(N.jsx)("th",{children:I(c,e,n.isInputVector)},t)})),u.map((function(e,t){return Object(N.jsx)("th",{children:I(s,e,n.isOutputVector)},t)}))]})}),Object(N.jsx)("tbody",{children:Array.from({length:Math.pow(2,c.length)}).map((function(e,t){return Object(N.jsxs)("tr",{children:[l.map((function(e,n){return Object(N.jsx)("td",{children:Math.floor(t/Math.pow(2,c.length-n-1))%2},n)})),u.map((function(e,t){return Object(N.jsx)("td",{children:"Z"},t)}))]},t)}))})]})]})}var C=d("h2",{margin:0});function k(e){var t,n=e.state,r=[],i=Object(O.a)(n.elements);try{for(i.s();!(t=i.n()).done;){var o,c=t.value,a=g[c.type].pins.map((function(){return!1})),s=Object(O.a)(n.connections);try{for(s.s();!(o=s.n()).done;){var l,u=o.value,d=Object(O.a)(u);try{for(d.s();!(l=d.n()).done;){var f=l.value;f.elId===c.id&&(a[f.pinIndex]=!0)}}catch(p){d.e(p)}finally{d.f()}}}catch(p){s.e(p)}finally{s.f()}a.some((function(e){return!e}))&&r.push("Floating pins on node ".concat(c.type))}}catch(p){i.e(p)}finally{i.f()}return r.length?Object(N.jsxs)("div",{children:[Object(N.jsx)(C,{children:"Errors:"}),r.map((function(e,t){return Object(N.jsx)("div",{children:e},t)}))]}):null}var D,S,L=d("main",{position:"relative",display:"flex",alignItems:"stretch",flexGrow:1,width:"100%",height:"100%",overflow:"hidden"}),U=d("div",{position:"absolute",display:"flex",flexDirection:"column",gap:4,top:0,left:0,padding:4,borderRadius:2}),R=d("div",{flexGrow:1,overflow:"hidden"}),V=d("canvas",{display:"block",cursor:"grab",variants:{enableScaling:{true:{transformOrigin:"0 0",transform:"scale(var(--factor, 1))"}}}}),W=d("button",{width:48,height:48,flexShrink:0,border:"none",color:"#333",background:"#dadada",whiteSpace:"nowrap",appearance:"none","&:disabled":{color:"#999"},"&:not(:disabled)":{cursor:"pointer"}}),G=d("span",{height:8}),A=d("span",{flexGrow:1}),B=d("span",{color:"#4ebd4e"}),_=d("span",{color:"#666"}),J=d("div",{display:"none","@bp2":{display:"flex",flexShrink:0,flexDirection:"column",flexBasis:300,padding:"16px 20px",borderLeft:"1px solid #888",background:"#ddd",overflow:"hidden",overflowYy:"auto","> *:not(:last-child)":{marginBottom:16}}}),Y=48;function X(e,t){return{x:e.x-t.x,y:e.y-t.y}}function H(e,t){var n=Math.sin(t),r=Math.cos(t);return{x:e.x*r-e.y*n,y:e.x*n+e.y*r}}function $(e){var t=e.elements[e.elements.length-1];if(!t)return"el1";var n=t.id.match(/^el(\d+)$/);if(!n)throw new Error;return"el".concat(parseInt(n[1],10)+1)}function z(e){return e?Object(N.jsx)(B,{children:"yes"}):Object(N.jsx)(_,{children:"no"})}function F(e){var t,n,i=e.gameId,o=Object(r.useRef)(null),c=Object(r.useRef)(null),a=function(){var e=Object(r.useRef)(0),t=Object(r.useState)(e.current),n=Object(s.a)(t,2)[1];return Object(r.useCallback)((function(){e.current+=1,n(e.current)}),[])}(),l=Object(r.useState)(),u=Object(s.a)(l,2),d=u[0],b=u[1],y=Object(r.useState)({isInputVector:!1,isOutputVector:!1}),m=Object(s.a)(y,2),E=m[0],T=m[1],w=j({factor:null!==(t=window.devicePixelRatio)&&void 0!==t?t:1}),P=j({width:0,height:0}),C=j({x:0,y:0}),B=j({x1:{images:{},status:D.NONE},x2:{images:{},status:D.NONE}}),_=j({x:0,y:0}),F=j({target:void 0}),Z=j({target:void 0}),Q=j({target:void 0}),q=j({source:void 0}),K=j({elements:[],connections:[]}),ee=j({isMouseDown:!1}),te=j({isPan:!1});function ne(e){var t=e.x,n=e.y;return{x:t-P.width/2-C.x,y:n-P.height/2-C.y}}function re(){C.x=0,C.y=0,K.elements=[],K.connections=[],F.target=void 0,Z.target=void 0,Q.target=void 0,q.source=void 0,te.isPan=!1,ee.isMouseDown=!1}var ie=p((function(){var e=localStorage.getItem("sch_game_".concat(i));if(e){var t=JSON.parse(e),r=t.pos,o=t.elements,c=t.connections,a=t.options;re(),C.x=r.x,C.y=r.y,K.elements=o,K.connections=c,T(a),window.setTimeout(n,0)}}));Object(r.useEffect)((function(){ie();var e=window.setInterval(a,500);return function(){window.clearInterval(e)}}),[]);var oe=p((function(e){var t=K.elements.find((function(t){return t.id===e}));if(!t)throw new Error("Element not found");return t})),ce=p((function(){var e=Z.target;if(e){switch(e.type){case S.ELEMENT:K.connections=K.connections.filter((function(t){var n=Object(s.a)(t,2),r=n[0],i=n[1];return r.elId!==e.elId&&i.elId!==e.elId})),K.elements=K.elements.filter((function(t){return t.id!==e.elId}));break;case S.CONNECTION:K.connections.splice(e.connectionIndex,1)}Z.target=void 0,n()}}));function ae(e){var t=e.elId,n=e.pinIndex,r=oe(t),i=g[r.type].pins[n];return{x:r.pos.x+(i.pos.x-.5)*Y,y:r.pos.y+(i.pos.y-.5)*Y}}function se(){var e,t=null!==(e=window.devicePixelRatio)&&void 0!==e?e:1;w.factor!==t&&(w.factor=t,a())}function le(){var e=c.current,t=o.current;if(!e||!t)throw new Error;P.width===e.clientWidth&&P.height===e.clientHeight||(P.width=e.clientWidth,P.height=e.clientHeight,t.width=P.width*w.factor,t.height=P.height*w.factor,n())}function ue(e){var t,n=Object(O.a)(K.elements);try{for(n.s();!(t=n.n()).done;){var r=t.value.pos;if(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2)<Math.pow(24,2))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}function de(e){for(var t=ne({x:P.width/2,y:P.height/2});ue(t);)t.x+=68;K.elements.push({type:e,id:$(K),pos:t}),n()}function fe(){var e=w.factor>1.5,t=B[e?"x1":"x2"];if(t.status===D.NONE){var r=[h.PNP,h.NPN,h.POWER,h.GROUND],i=r.length;t.status=D.LOADING;for(var o=function(){var n=a[c],r=new Image;r.src="assets/".concat(n).concat(e?"@2x":"",".png"),r.addEventListener("load",(function(){t.images[n]=r,s()})),r.addEventListener("error",s)},c=0,a=r;c<a.length;c++)o()}function s(){0===(i-=1)&&(t.status=D.DONE,n())}}function pe(e){var t=e.elId,n=e.pinIndex;Z.target={type:S.ELEMENT,elId:t},q.source={elId:t,pinIndex:n}}n=p((function(){if(0!==P.width){var e=function(e){if(!e)throw new Error;var t=e.getContext("2d");if(!t)throw new Error;return t}(o.current);se();var t=w.factor,n=F.target;e.save(),e.clearRect(0,0,P.width*t,P.height*t),1!==t&&e.scale(t,t),e.translate(Math.floor(P.width/2)+C.x,Math.floor(P.height/2)+C.y),e.save(),e.lineWidth=1,e.textBaseline="middle",e.textAlign="center",e.font="15px sans-serif",e.fillStyle="#333",e.beginPath(),e.moveTo(0,0),e.lineTo(100,0),e.moveTo(95,-5),e.lineTo(100,0),e.moveTo(95,5),e.lineTo(100,0),e.strokeStyle="#0f0",e.stroke(),e.fillText("X",90,15),e.beginPath(),e.moveTo(0,0),e.lineTo(0,100),e.moveTo(-5,95),e.lineTo(0,100),e.moveTo(5,95),e.lineTo(0,100),e.strokeStyle="#00f",e.stroke(),e.fillText("Y",12,90),e.restore();var r,i=Object(O.a)(K.elements);try{for(i.s();!(r=i.n()).done;){var c=r.value,a=c.pos,l=n&&n.type===S.ELEMENT&&c.id===n.elId,u=Z.target&&Z.target.type===S.ELEMENT&&Z.target.elId===c.id;(l||u)&&(e.save(),l?(e.strokeStyle=u?"#7f7fff":"#e5e5e5",e.lineWidth=3):(e.strokeStyle="#bebeff",e.lineWidth=2),e.strokeRect(a.x-26,a.y-26,52,52),e.restore())}}catch(re){i.e(re)}finally{i.f()}var f,p=0,v=Object(O.a)(K.connections);try{for(v.s();!(f=v.n()).done;){var x=Object(s.a)(f.value,2),j=x[0],y=x[1],m=oe(j.elId),N=oe(y.elId),T=g[m.type].pins[j.pinIndex],M=g[N.type].pins[y.pinIndex];e.save(),e.beginPath(),e.moveTo(m.pos.x-24+T.pos.x*Y,m.pos.y-24+T.pos.y*Y),e.lineTo(N.pos.x-24+M.pos.x*Y,N.pos.y-24+M.pos.y*Y);var k=n&&n.type===S.CONNECTION&&n.connectionIndex===p,D=Z.target&&Z.target.type===S.CONNECTION&&Z.target.connectionIndex===p;e.lineWidth=k||D?3:1,e.strokeStyle=k&&D?"#8080ff":D?"#bfbfff":"#333",e.stroke(),e.restore(),p+=1}}catch(re){v.e(re)}finally{v.f()}if(q.source){var L=q.source,U=L.elId,R=L.pinIndex,V=oe(U),W=g[V.type].pins[R].pos,G=W.x*Y+V.pos.x-24,A=W.y*Y+V.pos.y-24,J=ne(_),X=J.x,H=J.y;e.save(),e.beginPath(),e.moveTo(G,A),e.lineTo(X,H),e.strokeStyle="#888",e.stroke(),e.restore()}var $,z,Q=Object(O.a)(K.elements);try{var ee=function(){var r=$.value,i=r.type,o=r.pos;if(i===h.INPUT||i===h.OUTPUT){var c=I(K.elements.filter((function(e){return e.type===i})),r,i===h.INPUT?E.isInputVector:E.isOutputVector);e.save(),e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",i===h.INPUT?e.fillText(c,o.x,o.y-10):e.fillText(c,o.x+6,o.y),e.restore()}else{var a,l=t>1.5?["x2","x1"]:["x1","x2"],u=Object(s.a)(l,2),d=u[0],f=u[1],p=null!==(a=B[d].images[i])&&void 0!==a?a:B[f].images[i];if(p){var v=o.x-24,x=o.y-24;e.drawImage(p,v,x,Y,Y)}}var j,b=g[i].pins,y=0,m=Object(O.a)(b);try{for(m.s();!(j=m.n()).done;){var N=j.value,T=n&&n.type===S.ELEMENT&&n.elId===r.id&&n.activePin&&n.activePin.index===y,w=q.source&&q.source.elId===r.id&&q.source.pinIndex===y;e.beginPath(),e.arc(o.x+(N.pos.x-.5)*Y,o.y+(N.pos.y-.5)*Y,T?6:5,0,2*Math.PI),e.closePath(),T||w?(e.save(),e.fillStyle=w?"#d66":"#66d",e.fill(),e.restore()):(e.save(),e.fillStyle="#fff",e.fill(),e.strokeStyle="#448",e.lineWidth=2,e.stroke(),e.restore()),y+=1}}catch(re){m.e(re)}finally{m.f()}};for(Q.s();!($=Q.n()).done;)ee()}catch(re){Q.e(re)}finally{Q.f()}e.restore(),q.source?z="pointer":n&&(n.type===S.CONNECTION?z="move":n.type===S.ELEMENT?z=n.activePin?"pointer":"move":te.isPan&&(z="grabbing")),z!==d&&b(z)}})),Object(r.useEffect)((function(){le(),fe()}),[]),f(fe,[w.factor]),v("resize",(function(){setTimeout((function(){se(),le()}),0)})),f(n,[E]);var ve=p((function(e){if(!e||(e.preventDefault(),0===e.button)){var t=!1;if(ee.isMouseDown=!1,!Z.target||Z.target.type!==S.ELEMENT||q.source||Q.target||(Z.target=void 0,t=!0),Q.target&&(Q.target=void 0,t=!0),te.isPan&&(te.isPan=!1,t=!0),q.source){var r=F.target;r&&r.type===S.ELEMENT&&r.activePin&&q.source.elId!==r.elId&&K.connections.push([{elId:r.elId,pinIndex:r.activePin.index},{elId:q.source.elId,pinIndex:q.source.pinIndex}]),q.source=void 0,t=!0}else if(!q.source){var i=F.target;i&&i.type===S.ELEMENT&&i.activePin&&(pe({elId:i.elId,pinIndex:i.activePin.index}),t=!0),i&&(i.type!==S.ELEMENT||i.activePin?i.type===S.CONNECTION&&(Z.target&&Z.target.type===S.CONNECTION&&Z.target.connectionIndex===i.connectionIndex||(Z.target={type:S.CONNECTION,connectionIndex:i.connectionIndex},t=!0)):Z.target&&Z.target.type===S.ELEMENT&&Z.target.elId===i.elId||(Z.target={type:S.ELEMENT,elId:i.elId},t=!0))}t&&n()}}));return Object(N.jsxs)(L,{children:[Object(N.jsx)(R,{ref:c,children:Object(N.jsx)(V,{ref:o,enableScaling:1!==w.factor,width:0,height:0,style:{"--factor":1/w.factor,cursor:d},onClick:function(e){e.preventDefault()},onMouseDown:function(e){e.preventDefault(),0===e.button&&(ee.isMouseDown&&ve(),ee.isMouseDown=!0)},onMouseMove:function(e){_.x=e.clientX,_.y=e.clientY;var t=!1;(function(){var e,t=ne(_),n=t.x,r=t.y,i=F.target,o=!1,c=!1,a=!1,l=Object(O.a)(K.elements);try{for(l.s();!(e=l.n()).done;){var u,d=e.value,f=g[d.type].pins,p=d.pos.x-24,v=d.pos.y-24,h=Object(O.a)(f);try{for(h.s();!(u=h.n()).done;){var x=u.value;if(Math.pow(p+x.pos.x*Y-n,2)+Math.pow(v+x.pos.y*Y-r,2)<Math.pow(9,2)){var j,b=f.indexOf(x);i&&i.type===S.ELEMENT&&i.elId===d.id&&(null===(j=i.activePin)||void 0===j?void 0:j.index)===b||(F.target={type:S.ELEMENT,elId:d.id,activePin:{index:b}},o=!0),c=!0;break}}}catch(A){h.e(A)}finally{h.f()}}}catch(A){l.e(A)}finally{l.f()}if(!c){var y,m=Object(O.a)(K.elements);try{for(m.s();!(y=m.n()).done;){var E=y.value,I=E.pos.x-24,N=E.pos.y-24;if(n>I&&n<I+Y&&r>N&&r<N+Y){i&&i.type===S.ELEMENT&&i.elId===E.id&&!i.activePin||(F.target={type:S.ELEMENT,elId:E.id,activePin:void 0},o=!0),c=!0;break}}}catch(A){m.e(A)}finally{m.f()}}if(!c){var T,w=Object(O.a)(K.connections);try{for(w.s();!(T=w.n()).done;){var P=T.value,M=Object(s.a)(P,2),C=M[0],k=M[1],D=ae(C),L=X(ae(k),D),U=X({x:n,y:r},D),R=Math.atan2(L.y,L.x),V=H(L,-R),W=H(U,-R);if(W.x>=-10&&W.x<=V.x+10&&W.y>-10&&W.y<10){var G=K.connections.indexOf(P);i&&i.type===S.CONNECTION&&i.connectionIndex===G||(F.target={type:S.CONNECTION,connectionIndex:G},o=!0),a=!0;break}}}catch(A){w.e(A)}finally{w.f()}}return c||a||F.target&&(F.target=void 0,o=!0),o})()&&(t=!0);var r=Boolean(Q.target),i=F.target;if(ee.isMouseDown){if(!r&&!q.source&&i&&i.type===S.ELEMENT&&i.activePin&&(pe({elId:i.elId,pinIndex:i.activePin.index}),t=!0),!r&&q.source&&(t=!0),r||q.source||!i||i.type!==S.ELEMENT||(Q.target={elId:i.elId},Z.target={type:S.ELEMENT,elId:i.elId},t=!0),q.source||Q.target||te.isPan||(te.isPan=!0,t=!0),Q.target){var o=oe(Q.target.elId);o.pos.x+=e.movementX,o.pos.y+=e.movementY}else q.source||(C.x+=e.movementX,C.y+=e.movementY);t=!0}else te.isPan&&(te.isPan=!1,t=!0);q.source&&(t=!0),t&&n()},onMouseUp:ve,onMouseLeave:function(){(function(){var e=!1;return ee.isMouseDown&&(ee.isMouseDown=!1),Q.target&&(Q.target=void 0,e=!0),te.isPan&&(te.isPan=!1,e=!0),q.source&&(q.source=void 0,e=!0),e})()&&n()},onContextMenu:function(e){(F.target||q.source||te.isPan)&&e.preventDefault()}})}),Object(N.jsxs)(U,{children:[Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),de(h.POWER)},children:"DD"}),Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),de(h.GROUND)},children:"GND"}),Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),de(h.NPN)},children:"npn"}),Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),de(h.PNP)},children:"pnp"}),Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),de(h.INPUT)},children:"input"}),Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),de(h.OUTPUT)},children:"output"}),Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),de(h.DOT)},children:"dot"}),Object(N.jsx)(G,{}),Object(N.jsx)(W,{type:"button",disabled:!Z.target,onClick:function(e){e.preventDefault(),ce()},children:"delete"}),Object(N.jsx)(G,{}),Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),ie()},children:"Load"}),Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),localStorage.setItem("sch_game_".concat(i),JSON.stringify({pos:C,elements:K.elements,connections:K.connections,options:E})),console.info("Saved")},children:"Save"}),Object(N.jsx)(W,{type:"button",onClick:function(e){e.preventDefault(),re(),n()},children:"Clear"}),Object(N.jsx)("a",{href:"#",children:Object(N.jsx)(W,{type:"button",children:"Exit"})})]}),Object(N.jsxs)(J,{children:[Object(N.jsx)(M,{elements:K.elements,options:E,onOptionsChange:function(e){return T(Object(x.a)(Object(x.a)({},E),e))}}),Object(N.jsx)(k,{state:K}),Object(N.jsx)(A,{}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{children:["elements: ",K.elements.length]}),Object(N.jsxs)("div",{children:["connections: ",K.connections.length]}),Object(N.jsxs)("div",{children:["el moving: ",z(Q.target)]}),Object(N.jsxs)("div",{children:["el in focus:"," ",z(Z.target&&Z.target.type===S.ELEMENT)]}),Object(N.jsxs)("div",{children:["conn in focus:"," ",z(Z.target&&Z.target.type===S.CONNECTION)]}),Object(N.jsxs)("div",{children:["el hover:"," ",z(F.target&&F.target.type===S.ELEMENT)]}),Object(N.jsxs)("div",{children:["pin hover:"," ",z(F.target&&F.target.type===S.ELEMENT&&F.target.activePin)]}),Object(N.jsxs)("div",{children:["conn hover:"," ",z(F.target&&F.target.type===S.CONNECTION)]}),Object(N.jsxs)("div",{children:["wiring: ",z(q.source)]}),Object(N.jsxs)("div",{children:["drag: ",z(te.isPan)]}),Object(N.jsxs)("div",{children:["mouse down: ",z(ee.isMouseDown)]})]})]})]})}!function(e){e[e.NONE=0]="NONE",e[e.LOADING=1]="LOADING",e[e.DONE=2]="DONE"}(D||(D={})),function(e){e[e.ELEMENT=0]="ELEMENT",e[e.CONNECTION=1]="CONNECTION"}(S||(S={}));var Z=d("div",{padding:16}),Q=d("h1",{margin:0}),q=d("h2",{fontVariant:"18|24"}),K=d("button",{marginLeft:16});function ee(e){var t,n=(null!==(t=window.location.hash)&&void 0!==t?t:"").trim().replace(/^#/,"");if(n){var r=n.match(/^g(\d+)$/);if(r){var i=r[0];if(e.includes(i))return i}}}function te(){var e=Object(r.useMemo)((function(){var e=localStorage.getItem("sch_games");return e?JSON.parse(e):[]}),[]),t=Object(r.useState)(e),n=Object(s.a)(t,2),i=n[0],o=n[1];f((function(){localStorage.setItem("sch_games",JSON.stringify(i))}),[i]);var c=Object(r.useState)(ee(i)),l=Object(s.a)(c,2),u=l[0],d=l[1];return v("hashchange",(function(){var e=ee(i);e!==u&&d(e)})),u?Object(N.jsx)(F,{gameId:u},u):Object(N.jsxs)(Z,{children:[Object(N.jsx)(Q,{children:"Schematic"}),Object(N.jsx)(q,{children:"Current schemas:"}),Object(N.jsx)("ul",{children:i.length?i.map((function(e){return Object(N.jsxs)("li",{children:[Object(N.jsx)("a",{href:"#".concat(e),children:e})," ",Object(N.jsx)(K,{type:"button",onClick:function(t){t.preventDefault(),window.confirm("Are you sure?")&&(o(i.filter((function(t){return t!==e}))),localStorage.removeItem("sch_game_".concat(e)))},children:"x"})]},e)})):Object(N.jsx)("div",{children:"no saved schemas"})}),Object(N.jsx)("button",{type:"button",onClick:function(e){e.preventDefault();var t=function(e){var t=e[e.length-1];if(!t)return"g1";var n=t.match(/^g(\d+)$/);if(!n)throw new Error;return"g".concat(parseInt(n[1],10)+1)}(i);o([].concat(Object(a.a)(i),[t])),window.setTimeout((function(){window.location.assign("#".concat(t))}),0)},children:"New schema"})]})}c.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(te,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.f536c80c.chunk.js.map